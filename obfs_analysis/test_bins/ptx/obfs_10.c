/* This file has been generated by the Hex-Rays decompiler.
   Copyright (c) 2007-2017 Hex-Rays <info@hex-rays.com>

   Detected compiler: GNU C++
*/

#include <defs.h>

#include <stdarg.h>


//-------------------------------------------------------------------------
// Function declarations

void *init_proc();
int sub_8048FC0();
// int __cdecl freopen64(_DWORD, _DWORD, _DWORD); weak
// int dup2(int fd, int fd2);
// int strcmp(const char *s1, const char *s2);
// int __cdecl open64(_DWORD, _DWORD); weak
// int putc_unlocked(int c, FILE *stream);
// int printf(const char *format, ...);
// int fflush(FILE *stream);
// void _exit(int status);
// void *memmove(void *dest, const void *src, size_t n);
// void free(void *ptr);
// char *strdup(const char *s);
// void *memcpy(void *dest, const void *src, size_t n);
// int mbsinit(const mbstate_t *ps);
// int ferror(FILE *stream);
// int fclose(FILE *stream);
// int getc_unlocked(FILE *stream);
// intmax_t strtoimax(const char *nptr, char **endptr, int base);
// int __cdecl fseeko64(_DWORD, _DWORD, _DWORD, _DWORD); weak
// int memcmp(const void *s1, const void *s2, size_t n);
// char *textdomain(const char *domainname);
// int iswprint(wint_t wc);
// int __cdecl fopen64(_DWORD, _DWORD); weak
// int ferror_unlocked(FILE *stream);
// size_t fwrite(const void *ptr, size_t size, size_t n, FILE *s);
// int __cdecl __fxstat64(_DWORD, _DWORD, _DWORD); weak
// size_t __ctype_get_mb_cur_max(void);
// size_t fread(void *ptr, size_t size, size_t n, FILE *stream);
// char *strcpy(char *dest, const char *src);
// size_t __fpending(FILE *fp);
// size_t mbrtowc(wchar_t *pwc, const char *s, size_t n, mbstate_t *p);
// int __cdecl __cxa_atexit(_DWORD, _DWORD, _DWORD); weak
// void error(int status, int errnum, const char *format, ...);
// char *getenv(const char *name);
// void *realloc(void *ptr, size_t size);
// void *malloc(size_t size);
// int re_match(struct re_pattern_buffer *buffer, const char *string, int length, int start, struct re_registers *regs);
// int __freading(FILE *fp);
// int iswspace(wint_t wc);
// void exit(int status);
// int __cdecl ftello64(_DWORD); weak
// char *gettext(const char *msgid);
// FILE *fdopen(int fd, const char *modes);
// int __cdecl fputs_unlocked(_DWORD, _DWORD); weak
// int getopt_long(int argc, char *const *argv, const char *shortopts, const struct option *longopts, int *longind);
// char *strchr(const char *s, int c);
// int fscanf(FILE *stream, const char *format, ...);
// size_t strlen(const char *s);
// size_t iconv(iconv_t cd, char **inbuf, size_t *inbytesleft, char **outbuf, size_t *outbytesleft);
// int iconv_close(iconv_t cd);
// int fprintf(FILE *stream, const char *format, ...);
// int re_search(struct re_pattern_buffer *buffer, const char *string, int length, int start, int range, struct re_registers *regs);
// void *memset(void *s, int c, size_t n);
// int ungetc(int c, FILE *stream);
// int *__errno_location(void);
// void *memchr(const void *s, int c, size_t n);
// int fileno(FILE *stream);
// size_t fwrite_unlocked(const void *ptr, size_t size, size_t n, FILE *stream);
// int strnlen(void); weak
// char *nl_langinfo(nl_item item);
// char *setlocale(int category, const char *locale);
// int toupper(int c);
// char *strrchr(const char *s, int c);
// int sprintf(char *s, const char *format, ...);
// int __cdecl lseek64(_DWORD, _DWORD, _DWORD, _DWORD); weak
// void qsort(void *base, size_t nmemb, size_t size, __compar_fn_t compar);
// char *bindtextdomain(const char *domainname, const char *dirname);
// int strncmp(const char *s1, const char *s2, size_t n);
// void abort(void);
// iconv_t iconv_open(const char *tocode, const char *fromcode);
// int close(int fd);
// void __assert_fail(const char *assertion, const char *file, unsigned int line, const char *function);
// const unsigned __int16 **__ctype_b_loc(void);
// int putchar_unlocked(int c);
// int _gmon_start__(void); weak
void sub_8049533();
void sub_8049550();
int sub_8049560();
int sub_80495D0();
int sub_80495F0();
void sub_804964F();
void sub_804966A();
signed int sub_804967A();
void sub_804975C();
void sub_8049777();
int sub_8049787();
int sub_8049811();
void sub_8049885();
void sub_80498A0();
int sub_80498B0();
void sub_8049992();
void sub_80499AD();
signed int sub_80499BD();
void sub_8049A9F();
void sub_8049ABA();
int sub_8049ACA();
void sub_8049BC1();
void sub_8049BDC();
int sub_8049BEC();
// int __usercall sub_8049C9E@<eax>(void (__cdecl *a1)(int *)@<eax>);
void sub_8049CEA();
void sub_8049D05();
int sub_8049D15();
int sub_8049D9F();
void sub_8049E13();
void sub_8049E2E();
int sub_8049E3E();
void sub_8049F20();
void sub_8049F3B();
int sub_8049F4B();
// int __usercall sub_8049FB2@<eax>(int a1@<eax>, int (__cdecl *a2)(void *, int)@<edx>);
int __cdecl sub_804A017(unsigned __int8 a1);
int sub_804A029();
int sub_804A054();
int __cdecl sub_804A07F(char *s1); // idb
char *__cdecl sub_804A225(char *a1);
char *__cdecl sub_804A255(char *s);
_DWORD __cdecl sub_804A65F(_DWORD); // weak
_DWORD sub_804A75F(); // weak
int __cdecl sub_804A90E(char *s1, int); // idb
int sub_804A9F3(const void *, const void *); // idb
int compar(const void *, const void *); // idb
int __cdecl sub_804ABE7(void *, int); // idb
void sub_804ACC2();
void __cdecl sub_804ACFB(char *s1);
void __cdecl sub_804AD8E(char *s1, int a2);
_DWORD __cdecl sub_804AED2(_DWORD); // weak
int __cdecl sub_804B6B3(int a1);
_DWORD __cdecl sub_804B6D9(_DWORD, _DWORD); // weak
_DWORD sub_804BB86(); // weak
_DWORD __cdecl sub_804BF2D(_DWORD); // weak
int sub_804CB6B(void); // weak
int sub_804CD8E();
int sub_804D024(void); // weak
size_t sub_804D444();
void __cdecl __noreturn sub_804D4E9(int status); // idb
int __cdecl main(int, char **, char **); // idb
void __noreturn sub_804E0C4();
int __cdecl sub_804E0D8(char *s, int, int, size_t); // idb
void __cdecl sub_804E20C(int a1, int a2, int a3);
int __cdecl sub_804E28F(int a1);
signed int __cdecl sub_804E3F4(int a1, int a2, int a3, int a4, char *a5);
int sub_804E53D();
signed int __cdecl sub_804E63A(int a1);
int __cdecl sub_804E689(int, int, FILE *stream); // idb
char *__cdecl sub_804E815(char *s);
int __cdecl sub_804E8EE(int a1, int a2);
char *__cdecl sub_804EF36(char *msgid, char *a2);
int __cdecl sub_804F286(int *a1, unsigned __int8 a2, char a3);
int *__cdecl sub_804F350(int *a1, int a2, int a3);
_DWORD __cdecl sub_804F391(_DWORD, _DWORD); // weak
const char *__cdecl sub_804F468(char *msgid, int a2);
_DWORD __cdecl sub_804F51B(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // weak
int __cdecl sub_804F5BE(void *s2, size_t n, mbstate_t *p, int, int, int, int, int); // idb
void *__cdecl sub_8050556(int a1, int a2, _DWORD *a3, int *a4);
_DWORD __cdecl sub_805074D(_DWORD, _DWORD, _DWORD, _DWORD); // weak
int __cdecl sub_80509FB(int a1, int a2);
int __cdecl sub_8050A25(int a1, int a2, int a3);
int __cdecl sub_8050A9B(int a1, int a2, int a3);
int __cdecl sub_8050AD9(int a1, int a2, int a3, int a4);
_DWORD __cdecl sub_8050B71(_DWORD, _DWORD, _DWORD); // weak
int __cdecl sub_8050C50(int a1, char a2);
int __cdecl sub_8050C99(int a1);
int __cdecl sub_8050CD6(int a1, int a2, int a3);
int sub_8050DA7();
int sub_8050DE7();
_DWORD __cdecl sub_8050F41(_DWORD, _DWORD, _DWORD); // weak
int __cdecl sub_8050FB1(int a1, int a2);
int __cdecl sub_8050FD3(int a1);
char *__cdecl sub_8050FEE(FILE *stream, int a2);
_DWORD __cdecl sub_80512A7(_DWORD, _DWORD, _DWORD); // weak
int __cdecl sub_8051347(int a1, int a2);
_DWORD __cdecl sub_805138B(_DWORD, _DWORD); // weak
int __cdecl sub_805176B(FILE *stream, int, int, int, int, int); // idb
int __cdecl sub_8051EB5(FILE *stream, int, int, int, int); // idb
int sub_8051F3B(FILE *stream, int a2, int a3, int a4, ...);
void *__cdecl sub_8051FFB(unsigned int a1, unsigned int a2);
int __cdecl sub_805205E(void *ptr, int, int); // idb
void *__cdecl sub_8052127(size_t size);
void *__cdecl sub_805213A(size_t size);
void *__cdecl sub_805217D(void *ptr, size_t size);
void *__cdecl sub_8052255(void *src, size_t n);
void __noreturn sub_80522A3();
char *__cdecl sub_805237F(char *s, char *fromcode, char *tocode);
int __cdecl sub_80523BD(_DWORD, _DWORD); // weak
int __cdecl sub_8052509(int a1, int a2, int a3);
int __cdecl sub_805253F(char *nptr, int, int base, int, char *s); // idb
int __cdecl sub_8052988(FILE *stream); // idb
int __cdecl sub_8052A4B(FILE *stream); // idb
int __cdecl sub_8052A84(FILE *fp); // idb
int __cdecl sub_8052AC4(FILE *stream, int, int, int); // idb
size_t __cdecl sub_8052BCE(wchar_t *pwc, char *s, size_t n, mbstate_t *p);
int __cdecl sub_8052C59(unsigned __int8 *a1, unsigned __int8 *a2);
int __cdecl sub_8052CEC(FILE *fp); // idb
int __cdecl sub_8052D86(int category); // idb
int sub_8052DFD(void); // weak
void __cdecl __noreturn sub_8052E33(void *src, size_t n, int); // idb
const char *sub_805332A();
int __cdecl sub_80533DD(int a1);
signed int __cdecl sub_80536E5(_BYTE *a1, int a2, unsigned int a3, _DWORD *a4);
_DWORD __cdecl sub_8053951(_DWORD); // weak
int __cdecl sub_80539B5(int c, size_t n, char); // idb
int __cdecl __noreturn sub_80541F7(_BYTE *a1, _BYTE *a2);
int sub_8054ABE(); // weak
_DWORD __cdecl sub_8054AC7(_DWORD); // weak
void *__cdecl sub_805523B(char *s, iconv_t cd);
char *__cdecl sub_80555E0(char *s, char *fromcode, char *tocode);
size_t __cdecl sub_80556C5(void *s, size_t n);
int __cdecl sub_805591C(int a1);
unsigned int __cdecl sub_8055952(unsigned int a1);
_DWORD __cdecl sub_8055A07(_DWORD); // weak
_DWORD __cdecl sub_8055B2D(_DWORD, _DWORD); // weak
bool __cdecl sub_8055BD2(unsigned __int8 a1);
size_t __cdecl sub_8055C29(const char *a1);
_DWORD __cdecl sub_8055D09(_DWORD, _DWORD, _DWORD, _DWORD); // weak
int __cdecl sub_8055FB6(int a1);
int __cdecl sub_8055FE5(int a1, int a2);
int __fastcall sub_8056159(_DWORD, _DWORD); // weak
int __fastcall sub_80561E2(_DWORD, _DWORD); // weak
int __stdcall sub_805625A(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // weak
int __stdcall sub_80562E1(_DWORD, _DWORD, _DWORD); // weak
int __stdcall sub_8056359(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // weak
int __stdcall sub_80563C9(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // weak
int (**sub_80563E0())();
void term_proc();

//-------------------------------------------------------------------------
// Data declarations

_UNKNOWN loc_804A2A3; // weak
_UNKNOWN loc_804A300; // weak
_UNKNOWN loc_804A3C6; // weak
_UNKNOWN loc_804A3F2; // weak
_UNKNOWN loc_804A424; // weak
_UNKNOWN loc_804A443; // weak
_UNKNOWN loc_804A460; // weak
_UNKNOWN loc_804A487; // weak
_UNKNOWN loc_804A4C9; // weak
_UNKNOWN loc_804A4F6; // weak
_UNKNOWN loc_804A530; // weak
_UNKNOWN loc_804A557; // weak
_UNKNOWN loc_804A580; // weak
_UNKNOWN loc_804A629; // weak
_UNKNOWN loc_804A62B; // weak
_UNKNOWN loc_804AA39; // weak
_UNKNOWN loc_804AAEF; // weak
_UNKNOWN loc_804ABB9; // weak
_UNKNOWN loc_804ABE2; // weak
_UNKNOWN loc_804AC88; // weak
_UNKNOWN loc_804AC93; // weak
_UNKNOWN loc_804CEC6; // weak
_UNKNOWN loc_804CF05; // weak
_UNKNOWN loc_804E2C7; // weak
_UNKNOWN loc_804E3D9; // weak
_UNKNOWN loc_804E5A8; // weak
_UNKNOWN loc_804E5E3; // weak
_UNKNOWN loc_804F088; // weak
_UNKNOWN loc_804F0ED; // weak
_UNKNOWN loc_804F125; // weak
_UNKNOWN loc_804F1DE; // weak
_UNKNOWN loc_804F1F1; // weak
_UNKNOWN loc_804F505; // weak
_UNKNOWN loc_80511D6; // weak
_UNKNOWN loc_80511DF; // weak
_UNKNOWN loc_805216D; // weak
_UNKNOWN loc_8052178; // weak
_UNKNOWN loc_8052C3B; // weak
_UNKNOWN loc_8052C54; // weak
_UNKNOWN loc_8052C87; // weak
_UNKNOWN loc_8052CD9; // weak
_UNKNOWN loc_8052CE5; // weak
_UNKNOWN loc_8052D50; // weak
_UNKNOWN loc_8052D7F; // weak
_UNKNOWN loc_8052DDC; // weak
_UNKNOWN loc_8052DF3; // weak
_UNKNOWN loc_805378F; // weak
_UNKNOWN loc_80537FB; // weak
_UNKNOWN loc_805382C; // weak
_UNKNOWN loc_80542BE; // weak
_UNKNOWN loc_8054A94; // weak
_UNKNOWN loc_8054AB9; // weak
_UNKNOWN loc_8055374; // weak
_UNKNOWN loc_805542A; // weak
_UNKNOWN loc_805542F; // weak
_UNKNOWN loc_8055594; // weak
_UNKNOWN loc_8055CCC; // weak
_UNKNOWN loc_8055CD3; // weak
char locale = '\0'; // idb
_UNKNOWN unk_80574AE; // weak
_UNKNOWN unk_80574B2; // weak
_UNKNOWN unk_80574C2; // weak
_UNKNOWN unk_80574C5; // weak
_UNKNOWN unk_80577F4; // weak
_UNKNOWN unk_8057DBF; // weak
int dword_8057F80[8] = { 6656, 4294967279, 4294967294, 2147483646, 0, 0, 0, 0 }; // idb
_UNKNOWN unk_80581F0; // weak
_UNKNOWN unk_80581F3; // weak
_UNKNOWN unk_80591FC; // weak
_UNKNOWN unk_80591FF; // weak
int dword_8059F04 = 0; // weak
int (*off_805BEE4[2])() = { &sub_80495F0, &sub_80495D0 }; // weak
int (*off_805BEE8)() = &sub_80495D0; // weak
int (*dword_805C008)(void) = NULL; // weak
int dword_805C160 = 0; // weak
int dword_805C174 = 0; // weak
int dword_805C188 = 0; // weak
int dword_805C19C = 0; // weak
int dword_805C1B0 = 0; // weak
int dword_805C1C4 = 0; // weak
int dword_805C1F4 = 0; // weak
char byte_805C1F8 = '\x01'; // weak
char *off_805C208[2] = { "xx", "8.28" }; // weak
int status = 1; // idb
_UNKNOWN unk_805C26C; // weak
_UNKNOWN unk_805C26F; // weak
int program_invocation_short_name; // weak
FILE *stderr; // idb
int program_invocation_name; // weak
FILE *stdin; // idb
FILE *stdout; // idb
char byte_805C2CC; // weak
char byte_805C366; // weak
char byte_805C4E7; // weak
char byte_805C595; // weak
char byte_805C596; // weak
int dword_805C599; // weak
char byte_805C59D; // weak
int dword_805C6F5; // weak
struct re_pattern_buffer buffer; // idb
char byte_805C955[9]; // idb
char byte_805C95E; // weak
char byte_805C95F; // weak
char byte_805C975; // weak
void *ptr; // idb
size_t nmemb; // idb
int dword_805CBC5; // weak
int dword_805CBC9; // weak
char byte_805CBCD; // weak
char *string; // idb
int dword_805CBD5; // weak
int dword_805CBDD; // weak
int dword_805CBE1; // weak
char *dword_805CBE9; // idb
int dword_805CBED; // weak
char byte_805CBF1; // weak
int dword_805CBF5; // weak
int dword_805CBF9; // weak
int dword_805CBFD; // weak
char byte_805CC01; // weak
int dword_805CC05; // weak
int dword_805CC15; // weak
int dword_805CC19; // weak
int dword_805CC1D; // weak
int dword_805CC21; // weak
int dword_805CC25; // weak
int dword_805CC29; // weak
int dword_805CC2D; // weak
int dword_805CC31; // weak
int dword_805CC35; // weak
int dword_805CC39; // weak
int dword_805CC3D; // weak
int dword_805CC41; // weak
int dword_805CD75[263]; // idb
// extern _UNKNOWN __gmon_start__; weak


//----- (08048F98) --------------------------------------------------------
void *init_proc()
{
  void *result; // eax

  result = &__gmon_start__;
  if ( &__gmon_start__ )
    result = (void *)_gmon_start__();
  return result;
}
// 80494F0: using guessed type int _gmon_start__(void);

//----- (08048FC0) --------------------------------------------------------
int sub_8048FC0()
{
  return dword_805C008();
}
// 805C008: using guessed type int (*dword_805C008)(void);

//----- (08049500) --------------------------------------------------------
#error "8049503: positive sp value has been found (funcsize=2)"

//----- (08049533) --------------------------------------------------------
void sub_8049533()
{
  ;
}

//----- (08049550) --------------------------------------------------------
void sub_8049550()
{
  ;
}

//----- (08049560) --------------------------------------------------------
int sub_8049560()
{
  int result; // eax

  result = 134595203 - (_DWORD)&program_invocation_short_name;
  if ( (unsigned int)(134595203 - (_DWORD)&program_invocation_short_name) > 6 )
    result = 0;
  return result;
}
// 8049560: could not find valid save-restore pair for ebp
// 805C280: using guessed type int program_invocation_short_name;

//----- (080495D0) --------------------------------------------------------
int sub_80495D0()
{
  int result; // eax

  if ( !byte_805C2CC )
  {
    result = sub_8049560();
    byte_805C2CC = 1;
  }
  return result;
}
// 80495D0: could not find valid save-restore pair for ebp
// 805C2CC: using guessed type char byte_805C2CC;

//----- (080495F0) --------------------------------------------------------
int sub_80495F0()
{
  return 0;
}
// 80495F0: could not find valid save-restore pair for ebp

//----- (0804964F) --------------------------------------------------------
void sub_804964F()
{
  ;
}

//----- (0804966A) --------------------------------------------------------
void sub_804966A()
{
  ;
}

//----- (0804967A) --------------------------------------------------------
signed int sub_804967A()
{
  return 3;
}
// 804967A: could not find valid save-restore pair for ebp

//----- (0804975C) --------------------------------------------------------
void sub_804975C()
{
  ;
}

//----- (08049777) --------------------------------------------------------
void sub_8049777()
{
  ;
}

//----- (08049787) --------------------------------------------------------
int sub_8049787()
{
  int result; // eax

  result = &unk_805C26F - &unk_805C26C;
  if ( (unsigned int)(&unk_805C26F - &unk_805C26C) > 6 )
    result = 0;
  return result;
}
// 8049787: could not find valid save-restore pair for ebp

//----- (08049811) --------------------------------------------------------
int sub_8049811()
{
  int result; // eax

  result = sub_8049787();
  byte_805C366 = 1;
  return result;
}
// 805C366: using guessed type char byte_805C366;

//----- (08049885) --------------------------------------------------------
void sub_8049885()
{
  ;
}

//----- (080498A0) --------------------------------------------------------
void sub_80498A0()
{
  ;
}

//----- (080498B0) --------------------------------------------------------
int sub_80498B0()
{
  int result; // eax

  result = &unk_805C26F - &unk_805C26C;
  if ( (unsigned int)(&unk_805C26F - &unk_805C26C) > 6 )
    result = 0;
  return result;
}
// 80498B0: could not find valid save-restore pair for ebp

//----- (08049992) --------------------------------------------------------
void sub_8049992()
{
  ;
}

//----- (080499AD) --------------------------------------------------------
void sub_80499AD()
{
  ;
}

//----- (080499BD) --------------------------------------------------------
signed int sub_80499BD()
{
  return 3;
}
// 80499BD: could not find valid save-restore pair for ebp

//----- (08049A9F) --------------------------------------------------------
void sub_8049A9F()
{
  ;
}

//----- (08049ABA) --------------------------------------------------------
void sub_8049ABA()
{
  ;
}

//----- (08049ACA) --------------------------------------------------------
int sub_8049ACA()
{
  int result; // eax

  result = &unk_805C26F - &unk_805C26C;
  if ( (unsigned int)(&unk_805C26F - &unk_805C26C) > 6 )
    result = 0;
  return result;
}
// 8049ACA: could not find valid save-restore pair for ebp

//----- (08049BC1) --------------------------------------------------------
void sub_8049BC1()
{
  ;
}

//----- (08049BDC) --------------------------------------------------------
void sub_8049BDC()
{
  ;
}

//----- (08049BEC) --------------------------------------------------------
int sub_8049BEC()
{
  int result; // eax

  result = &unk_805C26F - &unk_805C26C;
  if ( (unsigned int)(&unk_805C26F - &unk_805C26C) > 6 )
    result = 0;
  return result;
}
// 8049BEC: could not find valid save-restore pair for ebp

//----- (08049C9E) --------------------------------------------------------
int __usercall sub_8049C9E@<eax>(void (__cdecl *a1)(int *)@<eax>)
{
  a1(&dword_8059F04);
  return 0;
}
// 8059F04: using guessed type int dword_8059F04;

//----- (08049CEA) --------------------------------------------------------
void sub_8049CEA()
{
  ;
}

//----- (08049D05) --------------------------------------------------------
void sub_8049D05()
{
  ;
}

//----- (08049D15) --------------------------------------------------------
int sub_8049D15()
{
  int result; // eax

  result = &unk_80591FF - &unk_80591FC;
  if ( (unsigned int)(&unk_80591FF - &unk_80591FC) > 6 )
    result = 0;
  return result;
}
// 8049D15: could not find valid save-restore pair for ebp

//----- (08049D9F) --------------------------------------------------------
int sub_8049D9F()
{
  int result; // eax

  result = sub_8049D15();
  byte_805C4E7 = 1;
  return result;
}
// 805C4E7: using guessed type char byte_805C4E7;

//----- (08049E13) --------------------------------------------------------
void sub_8049E13()
{
  ;
}

//----- (08049E2E) --------------------------------------------------------
void sub_8049E2E()
{
  ;
}

//----- (08049E3E) --------------------------------------------------------
int sub_8049E3E()
{
  int result; // eax

  result = &unk_80581F3 - &unk_80581F0;
  if ( (unsigned int)(&unk_80581F3 - &unk_80581F0) > 6 )
    result = 0;
  return result;
}
// 8049E3E: could not find valid save-restore pair for ebp

//----- (08049F20) --------------------------------------------------------
void sub_8049F20()
{
  ;
}

//----- (08049F3B) --------------------------------------------------------
void sub_8049F3B()
{
  ;
}

//----- (08049F4B) --------------------------------------------------------
int sub_8049F4B()
{
  int result; // eax

  result = &unk_80581F3 - &unk_80581F0;
  if ( (unsigned int)(&unk_80581F3 - &unk_80581F0) > 6 )
    result = 0;
  return result;
}
// 8049F4B: could not find valid save-restore pair for ebp

//----- (08049FB2) --------------------------------------------------------
int __usercall sub_8049FB2@<eax>(int a1@<eax>, int (__cdecl *a2)(void *, int)@<edx>)
{
  return a2(&unk_80581F0, a1);
}

//----- (0804A017) --------------------------------------------------------
int __cdecl sub_804A017(unsigned __int8 a1)
{
  return a1;
}

//----- (0804A029) --------------------------------------------------------
int sub_804A029()
{
  FILE *v0; // ebx
  char *v1; // eax

  v0 = stdout;
  v1 = gettext("\nWith no FILE, or when FILE is -, read standard input.\n");
  return fputs_unlocked(v1, v0);
}
// 80492B0: using guessed type int __cdecl fputs_unlocked(_DWORD, _DWORD);

//----- (0804A054) --------------------------------------------------------
int sub_804A054()
{
  FILE *v0; // ebx
  char *v1; // eax

  v0 = stdout;
  v1 = gettext("\nMandatory arguments to long options are mandatory for short options too.\n");
  return fputs_unlocked(v1, v0);
}
// 80492B0: using guessed type int __cdecl fputs_unlocked(_DWORD, _DWORD);

//----- (0804A07F) --------------------------------------------------------
int __cdecl sub_804A07F(char *s1)
{
  char *v1; // eax
  char *v2; // eax
  char *v3; // eax
  char *v4; // ebx
  char *v5; // eax
  int v7; // [esp+0h] [ebp-68h]
  char *v8; // [esp+4h] [ebp-64h]
  char *v9; // [esp+8h] [ebp-60h]
  char *v10; // [esp+1Ch] [ebp-4Ch]
  char **i; // [esp+20h] [ebp-48h]
  char *v12; // [esp+24h] [ebp-44h]
  const char *v13; // [esp+28h] [ebp-40h]
  const char *v14; // [esp+2Ch] [ebp-3Ch]
  const char *v15; // [esp+30h] [ebp-38h]
  const char *v16; // [esp+34h] [ebp-34h]
  const char *v17; // [esp+38h] [ebp-30h]
  const char *v18; // [esp+3Ch] [ebp-2Ch]
  const char *v19; // [esp+40h] [ebp-28h]
  const char *v20; // [esp+44h] [ebp-24h]
  const char *v21; // [esp+48h] [ebp-20h]
  const char *v22; // [esp+4Ch] [ebp-1Ch]
  const char *v23; // [esp+50h] [ebp-18h]
  const char *v24; // [esp+54h] [ebp-14h]
  int v25; // [esp+58h] [ebp-10h]
  int v26; // [esp+5Ch] [ebp-Ch]

  v13 = "[";
  v14 = "test invocation";
  v15 = "coreutils";
  v16 = "Multi-call invocation";
  v17 = "sha224sum";
  v18 = "sha2 utilities";
  v19 = "sha256sum";
  v20 = "sha2 utilities";
  v21 = "sha384sum";
  v22 = "sha2 utilities";
  v23 = "sha512sum";
  v24 = "sha2 utilities";
  v25 = 0;
  v26 = 0;
  v10 = s1;
  for ( i = (char **)(&v7 - 16); *i; i += 2 )
  {
    v8 = *i;
    if ( !strcmp(s1, v8) )
      break;
  }
  if ( i[1] )
    v10 = i[1];
  v1 = gettext("\n%s online help: <%s>\n");
  v9 = "http://www.gnu.org/software/coreutils/";
  v8 = "GNU coreutils";
  printf(v1, "GNU coreutils", "http://www.gnu.org/software/coreutils/");
  v12 = setlocale(5, 0);
  if ( v12 && strncmp(v12, "en_", 3u) )
  {
    v2 = gettext("Report %s translation bugs to <http://translationproject.org/team/>\n");
    v8 = s1;
    printf(v2, s1);
  }
  v3 = gettext("Full documentation at: <%s%s>\n");
  v9 = s1;
  v8 = "http://www.gnu.org/software/coreutils/";
  printf(v3, "http://www.gnu.org/software/coreutils/", s1);
  if ( v10 == s1 )
    v4 = " invocation";
  else
    v4 = &locale;
  v5 = gettext("or available locally via: info '(coreutils) %s%s'\n");
  v9 = v4;
  v8 = v10;
  return printf(v5, v10, v4);
}

//----- (0804A225) --------------------------------------------------------
char *__cdecl sub_804A225(char *a1)
{
  char *v1; // ebx
  int *v2; // eax

  v1 = gettext("error in regular expression matcher");
  v2 = __errno_location();
  error(1, *v2, v1);
  return sub_804A255(a1);
}

//----- (0804A255) --------------------------------------------------------
#error "804A5A3: call analysis failed (funcsize=295)"

//----- (0804A65F) --------------------------------------------------------
#error "804A6AF: call analysis failed (funcsize=26)"

//----- (0804A6B4) --------------------------------------------------------
#error "804A75C: positive sp value has been found (funcsize=0)"

//----- (0804A75F) --------------------------------------------------------
#error "804A784: call analysis failed (funcsize=98)"

//----- (0804A90E) --------------------------------------------------------
int __cdecl sub_804A90E(char *s1, int a2)
{
  bool v2; // al
  char *v3; // eax
  char *v4; // eax
  int v5; // ebx
  int *v6; // eax
  int result; // eax
  bool v8; // [esp+1Bh] [ebp-Dh]
  int v9; // [esp+1Ch] [ebp-Ch]

  v2 = !s1 || !*s1 || !strcmp(s1, "-");
  v8 = v2;
  if ( v2 )
    v3 = sub_8050FEE(stdin, (int)&v9);
  else
    v3 = (char *)sub_8051347((int)s1, (int)&v9);
  *(_DWORD *)a2 = v3;
  if ( !*(_DWORD *)a2 )
  {
    if ( v8 )
      v4 = "-";
    else
      v4 = s1;
    v5 = sub_8050CD6(0, 3, (int)v4);
    v6 = __errno_location();
    error(1, *v6, "%s", v5);
  }
  result = a2;
  *(_DWORD *)(a2 + 4) = v9 + *(_DWORD *)a2;
  return result;
}

//----- (0804A9F3) --------------------------------------------------------
int __cdecl sub_804A9F3(const void *a1, const void *a2)
{
  int v2; // ecx
  int v3; // edx
  int v4; // eax
  void *v5; // eax
  int v6; // ebx
  unsigned __int8 v7; // al
  int result; // eax
  int i; // [esp+8h] [ebp-10h]
  int v10; // [esp+Ch] [ebp-Ch]

  v3 = *((_DWORD *)a2 + 1);
  v4 = *((_DWORD *)a1 + 1);
  if ( v3 <= v4 )
    v4 = *((_DWORD *)a2 + 1);
  v10 = v4;
  if ( byte_805C59D )
  {
    v5 = &loc_804AAEF;
    if ( v10 > 0 )
      v5 = &loc_804AA39;
    dword_805C1C4 = (int)v5;
    sub_8056159(v2, v3);
  }
  else
  {
    for ( i = 0; i < v10; ++i )
    {
      v6 = (unsigned __int8)sub_804A017(*(_BYTE *)(*(_DWORD *)a1 + i));
      v7 = sub_804A017(*(_BYTE *)(*(_DWORD *)a2 + i));
      if ( v6 != v7 )
        return v6 - v7;
    }
  }
  if ( *((_DWORD *)a1 + 1) < *((_DWORD *)a2 + 1) )
    result = -1;
  else
    result = *((_DWORD *)a1 + 1) > *((_DWORD *)a2 + 1);
  return result;
}
// 8056159: using guessed type int __fastcall sub_8056159(_DWORD, _DWORD);
// 805C1C4: using guessed type int dword_805C1C4;
// 805C59D: using guessed type char byte_805C59D;

//----- (0804AB7F) --------------------------------------------------------
int __cdecl compar(const void *a1, const void *a2)
{
  bool v2; // zf
  void *v3; // eax
  int result; // eax
  int v5; // [esp+0h] [ebp-18h]
  int v6; // [esp+4h] [ebp-14h]
  int v7; // [esp+8h] [ebp-10h]

  v2 = sub_804A9F3(a1, a2) == 0;
  v3 = &loc_804ABB9;
  if ( !v2 )
    v3 = &loc_804ABE2;
  dword_805C188 = (int)v3;
  sub_80562E1(v5, v6, v7);
  if ( *(_DWORD *)a1 < *(_DWORD *)a2 )
    result = -1;
  else
    result = *(_DWORD *)a1 > *(_DWORD *)a2;
  return result;
}
// 80562E1: using guessed type int __stdcall sub_80562E1(_DWORD, _DWORD, _DWORD);
// 805C188: using guessed type int dword_805C188;

//----- (0804ABE7) --------------------------------------------------------
int __cdecl sub_804ABE7(void *a1, int a2)
{
  int v2; // edx
  int v3; // ecx
  void *v4; // eax
  int v6; // [esp+8h] [ebp-10h]
  int v7; // [esp+Ch] [ebp-Ch]
  int v8; // [esp+10h] [ebp-8h]
  int v9; // [esp+14h] [ebp-4h]

  v6 = 0;
  v7 = *(_DWORD *)(a2 + 8) - 1;
  while ( v6 <= v7 )
  {
    v8 = (v6 + v7) / 2;
    v9 = sub_804A9F3(a1, (const void *)(8 * v8 + *(_DWORD *)a2));
    if ( v9 >= 0 )
    {
      v4 = &loc_804AC88;
      if ( v9 <= 0 )
        v4 = &loc_804AC93;
      dword_805C1B0 = (int)v4;
      sub_80561E2(v3, v2);
      v6 = v8 + 1;
    }
    else
    {
      v7 = v8 - 1;
    }
  }
  return 0;
}
// 80561E2: using guessed type int __fastcall sub_80561E2(_DWORD, _DWORD);
// 805C1B0: using guessed type int dword_805C1B0;

//----- (0804ACC2) --------------------------------------------------------
void sub_804ACC2()
{
  if ( nmemb )
    qsort(ptr, nmemb, 0x1Cu, compar);
}

//----- (0804ACFB) --------------------------------------------------------
void __cdecl sub_804ACFB(char *s1)
{
  unsigned __int8 *i; // [esp+14h] [ebp-14h]
  void *ptr; // [esp+18h] [ebp-10h]
  unsigned int v3; // [esp+1Ch] [ebp-Ch]

  sub_804A90E(s1, (int)&ptr);
  memset(byte_805C955, 1, 0x100u);
  for ( i = (unsigned __int8 *)ptr; v3 > (unsigned int)i; ++i )
    byte_805C955[(unsigned __int8)sub_804A017(*i)] = 0;
  if ( byte_805C1F8 != 1 )
  {
    byte_805C975 = 0;
    byte_805C95E = 0;
    byte_805C95F = 0;
  }
  free(ptr);
}
// 805C1F8: using guessed type char byte_805C1F8;
// 805C95E: using guessed type char byte_805C95E;
// 805C95F: using guessed type char byte_805C95F;
// 805C975: using guessed type char byte_805C975;

//----- (0804AD8E) --------------------------------------------------------
void __cdecl sub_804AD8E(char *s1, int a2)
{
  _BYTE *v2; // [esp+10h] [ebp-18h]
  unsigned int v3; // [esp+14h] [ebp-14h]
  int v4; // [esp+18h] [ebp-10h]
  unsigned int v5; // [esp+1Ch] [ebp-Ch]

  sub_804A90E(s1, (int)&v4);
  *(_DWORD *)a2 = 0;
  *(_DWORD *)(a2 + 4) = 0;
  *(_DWORD *)(a2 + 8) = 0;
  v2 = (_BYTE *)v4;
  while ( v5 > (unsigned int)v2 )
  {
    v3 = (unsigned int)v2;
    while ( v5 > (unsigned int)v2 && *v2 != 10 )
      ++v2;
    if ( (unsigned int)v2 > v3 )
    {
      if ( *(_DWORD *)(a2 + 8) == *(_DWORD *)(a2 + 4) )
        *(_DWORD *)a2 = sub_805205E(*(void **)a2, a2 + 4, 8);
      *(_DWORD *)(8 * *(_DWORD *)(a2 + 8) + *(_DWORD *)a2) = v3;
      *(_DWORD *)(*(_DWORD *)a2 + 8 * (*(_DWORD *)(a2 + 8))++ + 4) = &v2[-v3];
    }
    if ( v5 > (unsigned int)v2 )
      ++v2;
  }
  qsort(*(void **)a2, *(_DWORD *)(a2 + 8), 8u, sub_804A9F3);
}

//----- (0804AED2) --------------------------------------------------------
#error "804B52C: call analysis failed (funcsize=531)"

//----- (0804B6B3) --------------------------------------------------------
int __cdecl sub_804B6B3(int a1)
{
  int result; // eax
  int i; // [esp+1Ch] [ebp-Ch]

  result = a1;
  for ( i = a1; i > 0; --i )
    result = putchar_unlocked(32);
  return result;
}

//----- (0804B6D9) --------------------------------------------------------
#error "804B6F3: call analysis failed (funcsize=266)"

//----- (0804BB86) --------------------------------------------------------
#error "804BBE0: call analysis failed (funcsize=195)"

//----- (0804BF2D) --------------------------------------------------------
#error "804C531: call analysis failed (funcsize=803)"

//----- (0804CB6B) --------------------------------------------------------
#error "804CD28: call analysis failed (funcsize=116)"

//----- (0804CD8E) --------------------------------------------------------
int sub_804CD8E()
{
  int v0; // edx
  int v1; // ecx
  int v2; // edx
  int v3; // ecx
  char *v5; // [esp+0h] [ebp-48h]
  unsigned __int8 *string; // [esp+28h] [ebp-20h]
  int v7; // [esp+2Ch] [ebp-1Ch]
  int v8; // [esp+30h] [ebp-18h]
  int v9; // [esp+3Ch] [ebp-Ch]

  printf("\\%s ", off_805C208[0]);
  putchar_unlocked(123);
  sub_804B6D9(dword_805CBC5, dword_805CBC9);
  fwrite_unlocked("}{", 1u, 2u, stdout);
  sub_804B6D9(::string, dword_805CBD5);
  fwrite_unlocked("}{", 1u, 2u, stdout);
  v8 = dword_805CBDD;
  v9 = dword_805CBE1;
  string = (unsigned __int8 *)dword_805CBDD;
  if ( dword_805C6F5 )
  {
    v7 = re_match(&buffer, (const char *)dword_805CBDD, dword_805CBE1 - dword_805CBDD, 0, 0);
    if ( v7 == -2 )
      sub_804A225(v5);
    if ( v7 != -1 )
    {
      dword_805C1B0 = (int)&loc_804CEC6;
      sub_80561E2(v1, v0);
    }
    ++string;
  }
  else if ( byte_805C955[(unsigned __int8)sub_804A017(*(_BYTE *)dword_805CBDD)] )
  {
    dword_805C1B0 = (int)&loc_804CF05;
    sub_80561E2(v3, v2);
    do
      ++string;
    while ( dword_805CBE1 > (unsigned int)string && byte_805C955[(unsigned __int8)sub_804A017(*string)] );
  }
  else
  {
    ++string;
  }
  sub_804B6D9(v8, string);
  fwrite_unlocked("}{", 1u, 2u, stdout);
  sub_804B6D9(string, v9);
  fwrite_unlocked("}{", 1u, 2u, stdout);
  sub_804B6D9(dword_805CBE9, dword_805CBED);
  putchar_unlocked(125);
  if ( byte_805C595 || byte_805C596 )
  {
    putchar_unlocked(123);
    sub_804B6D9(dword_805CBF5, dword_805CBF9);
    putchar_unlocked(125);
  }
  return putchar_unlocked(10);
}
// 804B6D9: using guessed type _DWORD __cdecl sub_804B6D9(_DWORD, _DWORD);
// 80561E2: using guessed type int __fastcall sub_80561E2(_DWORD, _DWORD);
// 805C1B0: using guessed type int dword_805C1B0;
// 805C208: using guessed type char *off_805C208[2];
// 805C595: using guessed type char byte_805C595;
// 805C596: using guessed type char byte_805C596;
// 805C6F5: using guessed type int dword_805C6F5;
// 805CBC5: using guessed type int dword_805CBC5;
// 805CBC9: using guessed type int dword_805CBC9;
// 805CBD5: using guessed type int dword_805CBD5;
// 805CBDD: using guessed type int dword_805CBDD;
// 805CBE1: using guessed type int dword_805CBE1;
// 805CBED: using guessed type int dword_805CBED;
// 805CBF5: using guessed type int dword_805CBF5;
// 805CBF9: using guessed type int dword_805CBF9;

//----- (0804D024) --------------------------------------------------------
#error "804D340: call analysis failed (funcsize=269)"

//----- (0804D444) --------------------------------------------------------
size_t sub_804D444()
{
  size_t result; // eax
  int i; // [esp+18h] [ebp-10h]
  char *v2; // [esp+1Ch] [ebp-Ch]

  dword_805CBC5 = 0;
  dword_805CBC9 = 0;
  byte_805CBCD = 0;
  dword_805CBE9 = 0;
  dword_805CBED = 0;
  byte_805CBF1 = 0;
  v2 = (char *)ptr;
  for ( i = 0; ; ++i )
  {
    result = nmemb;
    if ( (signed int)nmemb <= i )
      break;
    sub_804BF2D(v2);
    if ( dword_805C599 == 2 )
    {
      sub_804CB6B();
    }
    else if ( (unsigned int)dword_805C599 < 2 )
    {
      sub_804D024();
    }
    else if ( dword_805C599 == 3 )
    {
      sub_804CD8E();
    }
    v2 += 28;
  }
  return result;
}
// 804BF2D: using guessed type _DWORD __cdecl sub_804BF2D(_DWORD);
// 804CB6B: using guessed type int sub_804CB6B(void);
// 804D024: using guessed type int sub_804D024(void);
// 805C599: using guessed type int dword_805C599;
// 805CBC5: using guessed type int dword_805CBC5;
// 805CBC9: using guessed type int dword_805CBC9;
// 805CBCD: using guessed type char byte_805CBCD;
// 805CBED: using guessed type int dword_805CBED;
// 805CBF1: using guessed type char byte_805CBF1;

//----- (0804D4E9) --------------------------------------------------------
void __cdecl __noreturn sub_804D4E9(int status)
{
  int v1; // ebx
  char *v2; // eax
  int v3; // esi
  int v4; // ebx
  char *v5; // eax
  FILE *v6; // ebx
  char *v7; // eax
  FILE *v8; // ebx
  char *v9; // eax
  FILE *v10; // ebx
  char *v11; // eax
  FILE *v12; // ebx
  char *v13; // eax
  FILE *v14; // ebx
  char *v15; // eax
  FILE *v16; // ebx
  char *v17; // eax
  FILE *v18; // ebx
  char *v19; // eax
  FILE *v20; // ebx
  char *v21; // eax

  if ( status )
  {
    v1 = dword_805CC05;
    v2 = gettext("Try '%s --help' for more information.\n");
    fprintf(stderr, v2, v1);
  }
  else
  {
    v3 = dword_805CC05;
    v4 = dword_805CC05;
    v5 = gettext("Usage: %s [OPTION]... [INPUT]...   (without -G)\n  or:  %s -G [OPTION]... [INPUT [OUTPUT]]\n");
    printf(v5, v4, v3);
    v6 = stdout;
    v7 = gettext("Output a permuted index, including context, of the words in the input files.\n");
    fputs_unlocked(v7, v6);
    sub_804A029();
    sub_804A054();
    v8 = stdout;
    v9 = gettext(
           "  -A, --auto-reference           output automatically generated references\n"
           "  -G, --traditional              behave more like System V 'ptx'\n");
    fputs_unlocked(v9, v8);
    v10 = stdout;
    v11 = gettext(
            "  -F, --flag-truncation=STRING   use STRING for flagging line truncations.\n"
            "                                 The default is '/'\n");
    fputs_unlocked(v11, v10);
    v12 = stdout;
    v13 = gettext(
            "  -M, --macro-name=STRING        macro name to use instead of 'xx'\n"
            "  -O, --format=roff              generate output as roff directives\n"
            "  -R, --right-side-refs          put references at right, not counted in -w\n"
            "  -S, --sentence-regexp=REGEXP   for end of lines or end of sentences\n"
            "  -T, --format=tex               generate output as TeX directives\n");
    fputs_unlocked(v13, v12);
    v14 = stdout;
    v15 = gettext(
            "  -W, --word-regexp=REGEXP       use REGEXP to match each keyword\n"
            "  -b, --break-file=FILE          word break characters in this FILE\n"
            "  -f, --ignore-case              fold lower case to upper case for sorting\n"
            "  -g, --gap-size=NUMBER          gap size in columns between output fields\n"
            "  -i, --ignore-file=FILE         read ignore word list from FILE\n"
            "  -o, --only-file=FILE           read only word list from this FILE\n");
    fputs_unlocked(v15, v14);
    v16 = stdout;
    v17 = gettext(
            "  -r, --references               first field of each line is a reference\n"
            "  -t, --typeset-mode               - not implemented -\n"
            "  -w, --width=NUMBER             output width in columns, reference excluded\n");
    fputs_unlocked(v17, v16);
    v18 = stdout;
    v19 = gettext("      --help     display this help and exit\n");
    fputs_unlocked(v19, v18);
    v20 = stdout;
    v21 = gettext("      --version  output version information and exit\n");
    fputs_unlocked(v21, v20);
    sub_804A07F("ptx");
  }
  exit(status);
}
// 80492B0: using guessed type int __cdecl fputs_unlocked(_DWORD, _DWORD);
// 805CC05: using guessed type int dword_805CC05;

//----- (0804D65D) --------------------------------------------------------
#error "804D8F9: call analysis failed (funcsize=537)"

//----- (0804E0C4) --------------------------------------------------------
void __noreturn sub_804E0C4()
{
  sub_804D4E9(1);
}

//----- (0804E0D8) --------------------------------------------------------
#error "804E174: call analysis failed (funcsize=61)"

//----- (0804E20C) --------------------------------------------------------
void __cdecl sub_804E20C(int a1, int a2, int a3)
{
  char *v3; // eax
  char *format; // ST2C_4
  int v5; // ebx
  int v6; // eax

  if ( a3 == -1 )
    v3 = gettext("invalid argument %s for %s");
  else
    v3 = gettext("ambiguous argument %s for %s");
  format = v3;
  v5 = sub_8050FB1(1, a1);
  v6 = sub_8050A9B(0, 8, a2);
  error(0, 0, format, v6, v5);
}

//----- (0804E28F) --------------------------------------------------------
int __cdecl sub_804E28F(int a1)
{
  FILE *v1; // ebx
  char *v2; // eax
  void *v3; // eax
  int v5; // [esp+0h] [ebp-28h]
  int v6; // [esp+4h] [ebp-24h]
  int v7; // [esp+8h] [ebp-20h]

  v1 = stderr;
  v2 = gettext("Valid arguments are:");
  fputs_unlocked(v2, v1);
  v3 = &loc_804E3D9;
  if ( *(_DWORD *)a1 )
    v3 = &loc_804E2C7;
  dword_805C188 = (int)v3;
  sub_80562E1(v5, v6, v7);
  return putc_unlocked(10, stderr);
}
// 80492B0: using guessed type int __cdecl fputs_unlocked(_DWORD, _DWORD);
// 80562E1: using guessed type int __stdcall sub_80562E1(_DWORD, _DWORD, _DWORD);
// 805C188: using guessed type int dword_805C188;

//----- (0804E3F4) --------------------------------------------------------
signed int __cdecl sub_804E3F4(int a1, int a2, int a3, int a4, char *a5)
{
  char *s; // [esp+0h] [ebp-2Ch]
  int v7; // [esp+4h] [ebp-28h]
  size_t n; // [esp+8h] [ebp-24h]
  size_t v9; // [esp+Ch] [ebp-20h]
  int v10; // [esp+10h] [ebp-1Ch]
  int v11; // [esp+14h] [ebp-18h]
  size_t v12; // [esp+18h] [ebp-14h]
  void (*v13)(void); // [esp+1Ch] [ebp-10h]

  *(&s - 3) = (char *)sub_804E0D8(a5, v10, v11, (size_t)a5);
  if ( (signed int)*(&s - 3) >= 0 )
    return (signed int)*(&s - 3);
  sub_804E20C((int)*(&s - 3), v9, (int)*(&s - 3));
  n = v12;
  v7 = v11;
  sub_804E28F(v10);
  v13();
  return -1;
}

//----- (0804E53D) --------------------------------------------------------
int sub_804E53D()
{
  int v0; // edx
  int v1; // ecx
  void *v2; // eax
  int v3; // ebx
  int *v4; // eax
  int result; // eax
  char *v6; // [esp+2Ch] [ebp-Ch]

  if ( sub_8052CEC(stdout) && (byte_805CC01 != 1 || *__errno_location() != 32) )
  {
    v6 = gettext("write error");
    v2 = &loc_804E5A8;
    if ( !dword_805CBFD )
      v2 = &loc_804E5E3;
    dword_805C1C4 = (int)v2;
    sub_8056159(v1, v0);
    v3 = sub_8050C99(dword_805CBFD);
    v4 = __errno_location();
    error(0, *v4, "%s: %s", v3, v6);
    _exit(status);
  }
  result = sub_8052CEC(stderr);
  if ( result )
    _exit(status);
  return result;
}
// 8056159: using guessed type int __fastcall sub_8056159(_DWORD, _DWORD);
// 805C1C4: using guessed type int dword_805C1C4;
// 805CBFD: using guessed type int dword_805CBFD;
// 805CC01: using guessed type char byte_805CC01;

//----- (0804E63A) --------------------------------------------------------
signed int __cdecl sub_804E63A(int a1)
{
  int fd; // [esp+1Ch] [ebp-Ch]

  fd = open64("/dev/null", 0);
  if ( fd == a1 )
    return 1;
  if ( fd >= 0 )
  {
    close(fd);
    *__errno_location() = 9;
  }
  return 0;
}
// 8049000: using guessed type int __cdecl open64(_DWORD, _DWORD);

//----- (0804E689) --------------------------------------------------------
#error "804E801: call analysis failed (funcsize=108)"

//----- (0804E815) --------------------------------------------------------
char *__cdecl sub_804E815(char *s)
{
  char *v1; // eax
  char *result; // eax
  char *v3; // [esp+18h] [ebp-10h]
  char *s1; // [esp+1Ch] [ebp-Ch]

  if ( !s )
  {
    fwrite("A NULL argv[0] was passed through an exec system call.\n", 1u, 0x37u, stderr);
    abort();
  }
  v3 = strrchr(s, 47);
  if ( v3 )
    v1 = v3 + 1;
  else
    v1 = s;
  s1 = v1;
  if ( v1 - s > 6 && !strncmp(v1 - 7, "/.libs/", 7u) )
  {
    s = s1;
    if ( !strncmp(s1, "lt-", 3u) )
    {
      s = s1 + 3;
      program_invocation_short_name = (int)(s1 + 3);
    }
  }
  dword_805CC05 = (int)s;
  result = s;
  program_invocation_name = (int)s;
  return result;
}
// 805C280: using guessed type int program_invocation_short_name;
// 805C290: using guessed type int program_invocation_name;
// 805CC05: using guessed type int dword_805CC05;

//----- (0804E8EE) --------------------------------------------------------
int __cdecl sub_804E8EE(int a1, int a2)
{
  int result; // eax
  unsigned int v3; // ecx
  wint_t wc; // [esp+0h] [ebp-BCh]
  int c; // [esp+4h] [ebp-B8h]
  int v6; // [esp+18h] [ebp-A4h]
  int v7; // [esp+1Ch] [ebp-A0h]
  unsigned int v8; // [esp+ACh] [ebp-10h]

  v7 = a1;
  v6 = a2;
  v8 = __readgsdword(0x14u);
  c = 2;
  wc = *(&wc - 40);
  *(&wc - 34) = sub_805138B(wc, 2);
  *((_BYTE *)&wc - 141) = 0;
  if ( *(_BYTE *)*(&wc - 39) )
    sub_80541F7((_BYTE *)*(&wc - 39), (_BYTE *)*(&wc - 34));
  free((void *)*(&wc - 34));
  result = *((unsigned __int8 *)&wc - 141);
  v3 = __readgsdword(0x14u) ^ *(&wc - 3);
  return result;
}
// 805138B: using guessed type _DWORD __cdecl sub_805138B(_DWORD, _DWORD);

//----- (0804EF36) --------------------------------------------------------
char *__cdecl sub_804EF36(char *msgid, char *a2)
{
  int v2; // edx
  int v3; // ecx
  char *v4; // eax
  bool v5; // zf
  int v6; // edx
  int v7; // ecx
  void *v8; // eax
  char *result; // eax
  size_t v10; // ebx
  void *v11; // eax
  size_t v12; // [esp+0h] [ebp-48h]
  int v13; // [esp+4h] [ebp-44h]
  char *v14; // [esp+8h] [ebp-40h]
  char *v15; // [esp+Ch] [ebp-3Ch]
  void *ptr; // [esp+14h] [ebp-34h]
  void *v17; // [esp+18h] [ebp-30h]
  char *v18; // [esp+1Ch] [ebp-2Ch]
  char *v19; // [esp+20h] [ebp-28h]
  char *s1; // [esp+24h] [ebp-24h]
  char *s; // [esp+28h] [ebp-20h]
  size_t n; // [esp+2Ch] [ebp-1Ch]
  void *dest; // [esp+30h] [ebp-18h]
  char *v24; // [esp+34h] [ebp-14h]
  char *v25; // [esp+38h] [ebp-10h]
  char *v26; // [esp+3Ch] [ebp-Ch]

  s1 = gettext(msgid);
  s = (char *)sub_805332A();
  ptr = 0;
  v17 = 0;
  v18 = 0;
  v19 = 0;
  if ( sub_8052C59((unsigned __int8 *)s, "UTF-8") )
  {
    ptr = sub_805237F(a2, "UTF-8", s);
    v18 = (char *)ptr;
    n = strlen(s);
    dest = sub_805213A(n + 11);
    memcpy(dest, s, n);
    memcpy((char *)dest + n, "//TRANSLIT", 0xBu);
    v24 = sub_805237F(a2, "UTF-8", (char *)dest);
    free(dest);
    if ( v24 )
    {
      if ( strchr(v24, 63) )
      {
        free(v24);
      }
      else
      {
        v17 = v24;
        v19 = v24;
        dword_805C1B0 = (int)&loc_804F088;
        sub_80561E2(v3, v2);
      }
    }
  }
  else
  {
    v18 = a2;
    v19 = a2;
  }
  if ( v18 )
  {
    v4 = v18;
  }
  else if ( v19 )
  {
    v4 = v19;
  }
  else
  {
    v4 = msgid;
  }
  v25 = v4;
  if ( !strcmp(s1, msgid) )
  {
    v11 = &loc_804F1DE;
    if ( !ptr )
      v11 = &loc_804F1F1;
    dword_805C188 = (int)v11;
    sub_80562E1(v12, v13, v14);
    if ( ptr != v25 )
      free(ptr);
    if ( v17 && v17 != v25 )
      free(v17);
    result = v25;
  }
  else
  {
    v5 = (unsigned __int8)sub_804E8EE((int)s1, (int)msgid) == 0;
    v8 = &loc_804F0ED;
    if ( !v5 )
      v8 = &loc_804F125;
    dword_805C1B0 = (int)v8;
    sub_80561E2(v7, v6);
    if ( v18 && (unsigned __int8)sub_804E8EE((int)s1, (int)v18)
      || v19 && (unsigned __int8)sub_804E8EE((int)s1, (int)v19) )
    {
      if ( ptr )
        free(ptr);
      if ( v17 )
        free(v17);
      result = s1;
    }
    else
    {
      v10 = strlen(s1);
      v12 = v10 + strlen(v25) + 4;
      v26 = (char *)sub_805213A(v12);
      v15 = v25;
      v14 = s1;
      sprintf(v26, "%s (%s)", s1, v25);
      if ( ptr )
        free(ptr);
      if ( v17 )
        free(v17);
      result = v26;
    }
  }
  return result;
}
// 80561E2: using guessed type int __fastcall sub_80561E2(_DWORD, _DWORD);
// 80562E1: using guessed type int __stdcall sub_80562E1(_DWORD, _DWORD, _DWORD);
// 805C188: using guessed type int dword_805C188;
// 805C1B0: using guessed type int dword_805C1B0;

//----- (0804F286) --------------------------------------------------------
int __cdecl sub_804F286(int *a1, unsigned __int8 a2, char a3)
{
  int *v3; // eax
  int *v4; // ST08_4
  int v5; // ST10_4

  if ( a1 )
    v3 = a1;
  else
    v3 = &dword_805CC15;
  v4 = &v3[(a2 >> 5) + 2];
  v5 = ((unsigned int)*v4 >> (a2 & 0x1F)) & 1;
  *v4 ^= (v5 ^ a3 & 1) << (a2 & 0x1F);
  return v5;
}
// 805CC15: using guessed type int dword_805CC15;

//----- (0804F350) --------------------------------------------------------
int *__cdecl sub_804F350(int *a1, int a2, int a3)
{
  int *result; // eax

  if ( !a1 )
    a1 = &dword_805CC15;
  *a1 = 10;
  if ( !a2 || !a3 )
    abort();
  a1[10] = a2;
  result = a1;
  a1[11] = a3;
  return result;
}
// 805CC15: using guessed type int dword_805CC15;

//----- (0804F391) --------------------------------------------------------
#error "804F459: call analysis failed (funcsize=62)"

//----- (0804F45E) --------------------------------------------------------
#error "804F463: positive sp value has been found (funcsize=0)"

//----- (0804F468) --------------------------------------------------------
const char *__cdecl sub_804F468(char *msgid, int a2)
{
  const char *result; // eax
  int v3; // edx
  int v4; // ecx
  char *v5; // [esp+18h] [ebp-10h]
  unsigned __int8 *v6; // [esp+1Ch] [ebp-Ch]

  v5 = gettext(msgid);
  if ( v5 != msgid )
    return v5;
  v6 = (unsigned __int8 *)sub_805332A();
  if ( sub_8052C59(v6, "UTF-8") )
  {
    if ( sub_8052C59(v6, "GB18030") )
    {
      if ( a2 == 9 )
        result = (const char *)&unk_80574C5;
      else
        result = "'";
    }
    else
    {
      if ( *msgid == 96 )
      {
        dword_805C1C4 = (int)&loc_804F505;
        sub_8056159(v4, v3);
      }
      result = (const char *)&unk_80574C2;
    }
  }
  else if ( *msgid == 96 )
  {
    result = (const char *)&unk_80574AE;
  }
  else
  {
    result = (const char *)&unk_80574B2;
  }
  return result;
}
// 8056159: using guessed type int __fastcall sub_8056159(_DWORD, _DWORD);
// 805C1C4: using guessed type int dword_805C1C4;

//----- (0804F51B) --------------------------------------------------------
#error "804F5B9: call analysis failed (funcsize=44)"

//----- (0804F5BE) --------------------------------------------------------
#error "8050443: positive sp value has been found (funcsize=994)"

//----- (08050556) --------------------------------------------------------
void *__cdecl sub_8050556(int a1, int a2, _DWORD *a3, int *a4)
{
  int *v4; // eax
  int *v5; // ST3C_4
  int v6; // ST40_4
  int v7; // ST44_4
  int size; // [esp+48h] [ebp-10h]
  void *v10; // [esp+4Ch] [ebp-Ch]

  if ( a4 )
    v4 = a4;
  else
    v4 = &dword_805CC15;
  v5 = v4;
  v6 = *__errno_location();
  v7 = v5[1] | (a3 == 0);
  size = sub_804F51B(0, 0, a1, a2, *v5, v7, v5 + 2, v5[10], v5[11]) + 1;
  v10 = sub_8052127(size);
  sub_804F51B(v10, size, a1, a2, *v5, v7, v5 + 2, v5[10], v5[11]);
  *__errno_location() = v6;
  if ( a3 )
    *a3 = size - 1;
  return v10;
}
// 804F51B: using guessed type _DWORD __cdecl sub_804F51B(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 805CC15: using guessed type int dword_805CC15;

//----- (0805074D) --------------------------------------------------------
#error "80508E7: call analysis failed (funcsize=112)"

//----- (080508EC) --------------------------------------------------------
#error "80509F8: positive sp value has been found (funcsize=73)"

//----- (080509FB) --------------------------------------------------------
int __cdecl sub_80509FB(int a1, int a2)
{
  return sub_805074D(a1, a2, -1, &dword_805CC15);
}
// 805074D: using guessed type _DWORD __cdecl sub_805074D(_DWORD, _DWORD, _DWORD, _DWORD);
// 805CC15: using guessed type int dword_805CC15;

//----- (08050A25) --------------------------------------------------------
int __cdecl sub_8050A25(int a1, int a2, int a3)
{
  return sub_805074D(a1, a2, a3, &dword_805CC15);
}
// 805074D: using guessed type _DWORD __cdecl sub_805074D(_DWORD, _DWORD, _DWORD, _DWORD);
// 805CC15: using guessed type int dword_805CC15;

//----- (08050A9B) --------------------------------------------------------
int __cdecl sub_8050A9B(int a1, int a2, int a3)
{
  char v4; // [esp+10h] [ebp-38h]

  sub_804F391(&v4, a2);
  return sub_805074D(a1, a3, -1, &v4);
}
// 804F391: using guessed type _DWORD __cdecl sub_804F391(_DWORD, _DWORD);
// 805074D: using guessed type _DWORD __cdecl sub_805074D(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (08050AD9) --------------------------------------------------------
int __cdecl sub_8050AD9(int a1, int a2, int a3, int a4)
{
  char v5; // [esp+10h] [ebp-38h]

  sub_804F391(&v5, a2);
  return sub_805074D(a1, a3, a4, &v5);
}
// 804F391: using guessed type _DWORD __cdecl sub_804F391(_DWORD, _DWORD);
// 805074D: using guessed type _DWORD __cdecl sub_805074D(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (08050B71) --------------------------------------------------------
#error "8050C01: call analysis failed (funcsize=40)"

//----- (08050C06) --------------------------------------------------------
#error "8050C4F: positive sp value has been found (funcsize=0)"

//----- (08050C50) --------------------------------------------------------
int __cdecl sub_8050C50(int a1, char a2)
{
  return sub_8050B71(a2, -1, a2);
}
// 8050B71: using guessed type _DWORD __cdecl sub_8050B71(_DWORD, _DWORD, _DWORD);

//----- (08050C99) --------------------------------------------------------
int __cdecl sub_8050C99(int a1)
{
  return sub_8050C50(a1, 58);
}

//----- (08050CD6) --------------------------------------------------------
int __cdecl sub_8050CD6(int a1, int a2, int a3)
{
  int v4; // [esp-4h] [ebp-7Ch]
  int v5; // [esp+10h] [ebp-68h]
  int v6; // [esp+14h] [ebp-64h]
  int v7; // [esp+18h] [ebp-60h]
  int v8; // [esp+1Ch] [ebp-5Ch]
  int v9; // [esp+20h] [ebp-58h]
  int v10; // [esp+24h] [ebp-54h]
  int v11; // [esp+28h] [ebp-50h]
  int v12; // [esp+2Ch] [ebp-4Ch]
  int v13; // [esp+30h] [ebp-48h]
  int v14; // [esp+34h] [ebp-44h]
  int v15; // [esp+38h] [ebp-40h]
  int v16; // [esp+3Ch] [ebp-3Ch]
  int v17; // [esp+40h] [ebp-38h]
  int v18; // [esp+44h] [ebp-34h]
  int v19; // [esp+48h] [ebp-30h]
  int v20; // [esp+4Ch] [ebp-2Ch]
  int v21; // [esp+50h] [ebp-28h]
  int v22; // [esp+54h] [ebp-24h]
  int v23; // [esp+58h] [ebp-20h]
  int v24; // [esp+5Ch] [ebp-1Ch]
  int v25; // [esp+60h] [ebp-18h]
  int v26; // [esp+64h] [ebp-14h]
  int v27; // [esp+68h] [ebp-10h]
  int v28; // [esp+6Ch] [ebp-Ch]

  sub_804F391(&v5, a2);
  v17 = v5;
  v18 = v6;
  v19 = v7;
  v20 = v8;
  v21 = v9;
  v22 = v10;
  v23 = v11;
  v24 = v12;
  v25 = v13;
  v26 = v14;
  v27 = v15;
  v28 = v16;
  sub_804F286(&v4 - 14, 0x3Au, 1);
  return sub_805074D(a1, a3, -1, &v17);
}
// 804F391: using guessed type _DWORD __cdecl sub_804F391(_DWORD, _DWORD);
// 805074D: using guessed type _DWORD __cdecl sub_805074D(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (08050DA7) --------------------------------------------------------
int sub_8050DA7()
{
  return sub_8050DE7();
}

//----- (08050DE7) --------------------------------------------------------
int sub_8050DE7()
{
  int v1; // [esp+0h] [ebp-4Ch]
  int v2; // [esp+Ch] [ebp-40h]
  int v3; // [esp+10h] [ebp-3Ch]
  int v4; // [esp+14h] [ebp-38h]
  int v5; // [esp+18h] [ebp-34h]
  int v6; // [esp+1Ch] [ebp-30h]
  int v7; // [esp+20h] [ebp-2Ch]
  int v8; // [esp+24h] [ebp-28h]
  int v9; // [esp+28h] [ebp-24h]
  int v10; // [esp+2Ch] [ebp-20h]
  int v11; // [esp+30h] [ebp-1Ch]
  int v12; // [esp+34h] [ebp-18h]

  v3 = dword_805CC15;
  v4 = dword_805CC19;
  v5 = dword_805CC1D;
  v6 = dword_805CC21;
  v7 = dword_805CC25;
  v8 = dword_805CC29;
  v9 = dword_805CC2D;
  v10 = dword_805CC31;
  v11 = dword_805CC35;
  v12 = dword_805CC39;
  *(&v1 - 4) = dword_805CC3D;
  *(&v1 - 3) = dword_805CC41;
  sub_804F350(&v1 - 14, v2, v3);
  return sub_805074D(v5, v4, v5, &v1 - 14);
}
// 805074D: using guessed type _DWORD __cdecl sub_805074D(_DWORD, _DWORD, _DWORD, _DWORD);
// 805CC15: using guessed type int dword_805CC15;
// 805CC19: using guessed type int dword_805CC19;
// 805CC1D: using guessed type int dword_805CC1D;
// 805CC21: using guessed type int dword_805CC21;
// 805CC25: using guessed type int dword_805CC25;
// 805CC29: using guessed type int dword_805CC29;
// 805CC2D: using guessed type int dword_805CC2D;
// 805CC31: using guessed type int dword_805CC31;
// 805CC35: using guessed type int dword_805CC35;
// 805CC39: using guessed type int dword_805CC39;
// 805CC3D: using guessed type int dword_805CC3D;
// 805CC41: using guessed type int dword_805CC41;

//----- (08050F41) --------------------------------------------------------
#error "8050F60: call analysis failed (funcsize=15)"

//----- (08050F73) --------------------------------------------------------
#error "8050F8E: positive sp value has been found (funcsize=0)"

//----- (08050FB1) --------------------------------------------------------
int __cdecl sub_8050FB1(int a1, int a2)
{
  return sub_8050F41(a1, a2, -1);
}
// 8050F41: using guessed type _DWORD __cdecl sub_8050F41(_DWORD, _DWORD, _DWORD);

//----- (08050FD3) --------------------------------------------------------
int __cdecl sub_8050FD3(int a1)
{
  return sub_8050FB1(0, a1);
}

//----- (08050FEE) --------------------------------------------------------
char *__cdecl sub_8050FEE(FILE *stream, int a2)
{
  int v2; // eax
  int v3; // edx
  void *v5; // eax
  bool v6; // zf
  void *v7; // eax
  char *v8; // ST30_4
  int v9; // [esp+0h] [ebp-A8h]
  int v10; // [esp+4h] [ebp-A4h]
  int v11; // [esp+8h] [ebp-A0h]
  int v12; // [esp+Ch] [ebp-9Ch]
  char *ptr; // [esp+10h] [ebp-98h]
  unsigned int size; // [esp+14h] [ebp-94h]
  unsigned int v15; // [esp+18h] [ebp-90h]
  signed int v16; // [esp+1Ch] [ebp-8Ch]
  size_t n; // [esp+20h] [ebp-88h]
  size_t v18; // [esp+24h] [ebp-84h]
  void *v19; // [esp+28h] [ebp-80h]
  char *v20; // [esp+2Ch] [ebp-7Ch]
  __int64 v21; // [esp+30h] [ebp-78h]
  __int64 v22; // [esp+38h] [ebp-70h]
  char v23; // [esp+40h] [ebp-68h]
  int v24; // [esp+50h] [ebp-58h]
  __int64 v25; // [esp+6Ch] [ebp-3Ch]

  size = 0x2000;
  v2 = fileno(stream);
  if ( sub_8055FE5(v2, (int)&v23) >= 0 && (v24 & 0xF000) == 0x8000 )
  {
    LODWORD(v21) = ftello64(stream);
    HIDWORD(v21) = v3;
    if ( v3 >= 0 && v25 > v21 )
    {
      LODWORD(v22) = v25 - v21;
      if ( v25 - v21 > 4294967294LL )
      {
        *__errno_location() = 12;
        return 0;
      }
      size = v22 + 1;
    }
  }
  ptr = (char *)malloc(size);
  if ( !ptr )
    return 0;
  v15 = 0;
  while ( 1 )
  {
    n = size - v15;
    v18 = fread(&ptr[v15], 1u, size - v15, stream);
    v15 += v18;
    if ( v18 != n )
      break;
    if ( size == -1 )
    {
      v16 = 12;
      goto LABEL_26;
    }
    if ( ~(size >> 1) <= size )
      size = -1;
    else
      size += size >> 1;
    v20 = (char *)realloc(ptr, size);
    if ( !v20 )
    {
      v16 = *__errno_location();
      goto LABEL_26;
    }
    ptr = v20;
  }
  v16 = *__errno_location();
  if ( ferror(stream) )
  {
LABEL_26:
    free(ptr);
    *__errno_location() = v16;
    return 0;
  }
  if ( size - 1 > v15 )
  {
    v5 = realloc(ptr, v15 + 1);
    v19 = v5;
    v6 = v5 == 0;
    v7 = &loc_80511D6;
    if ( v6 )
      v7 = &loc_80511DF;
    dword_805C160 = (int)v7;
    sub_80563C9(v9, v10, v11, v12, ptr, size, v15, v16, n, v18, v19, v20, v21, HIDWORD(v21), v22);
    ptr = v8;
  }
  ptr[v15] = 0;
  *(_DWORD *)a2 = v15;
  return ptr;
}
// 8049280: using guessed type int __cdecl ftello64(_DWORD);
// 80563C9: using guessed type int __stdcall sub_80563C9(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 805C160: using guessed type int dword_805C160;

//----- (080512A7) --------------------------------------------------------
#error "8051317: call analysis failed (funcsize=51)"

//----- (08051347) --------------------------------------------------------
int __cdecl sub_8051347(int a1, int a2)
{
  return sub_80512A7(a1, a2, &unk_80577F4);
}
// 80512A7: using guessed type _DWORD __cdecl sub_80512A7(_DWORD, _DWORD, _DWORD);

//----- (0805138B) --------------------------------------------------------
#error "8051657: call analysis failed (funcsize=290)"

//----- (0805176B) --------------------------------------------------------
#error "8051D41: call analysis failed (funcsize=410)"

//----- (08051EB5) --------------------------------------------------------
int __cdecl sub_8051EB5(FILE *stream, int a2, int a3, int a4, int a5)
{
  int *v5; // eax
  int v7; // [esp+0h] [ebp-58h]
  int i; // [esp+24h] [ebp-34h]
  int v9[12]; // [esp+28h] [ebp-30h]

  for ( i = 0; (unsigned int)i <= 9; ++i )
  {
    v5 = (int *)a5;
    a5 += 4;
    v9[i] = *v5;
    if ( !v9[i] )
      break;
  }
  return sub_805176B(stream, a2, a3, a4, (int)(&v7 - 12), i);
}
// 8051EB5: using guessed type int var_30[12];

//----- (08051F3B) --------------------------------------------------------
int sub_8051F3B(FILE *stream, int a2, int a3, int a4, ...)
{
  va_list va; // [esp+50h] [ebp+18h]

  va_start(va, a4);
  return sub_8051EB5(stream, a2, a3, a4, (int)va);
}

//----- (08051FFB) --------------------------------------------------------
void *__cdecl sub_8051FFB(unsigned int a1, unsigned int a2)
{
  if ( 0x7FFFFFFF / a2 < a1 )
    sub_80522A3();
  return sub_805213A(a2 * a1);
}

//----- (0805205E) --------------------------------------------------------
#error "80520A5: call analysis failed (funcsize=51)"

//----- (08052127) --------------------------------------------------------
void *__cdecl sub_8052127(size_t size)
{
  return sub_805213A(size);
}

//----- (0805213A) --------------------------------------------------------
void *__cdecl sub_805213A(size_t size)
{
  void *v1; // eax
  int v2; // edx
  int v3; // ecx
  bool v4; // zf
  void *v5; // eax
  void *v7; // [esp+1Ch] [ebp-Ch]

  v1 = malloc(size);
  v7 = v1;
  v4 = v1 == 0;
  v5 = &loc_805216D;
  if ( !v4 )
    v5 = &loc_8052178;
  dword_805C1B0 = (int)v5;
  sub_80561E2(v3, v2);
  if ( size )
    sub_80522A3();
  return v7;
}
// 80561E2: using guessed type int __fastcall sub_80561E2(_DWORD, _DWORD);
// 805C1B0: using guessed type int dword_805C1B0;

//----- (0805217D) --------------------------------------------------------
void *__cdecl sub_805217D(void *ptr, size_t size)
{
  void *result; // eax
  void *ptra; // [esp+20h] [ebp+8h]

  if ( size || !ptr )
  {
    ptra = realloc(ptr, size);
    if ( !ptra )
    {
      if ( size )
        sub_80522A3();
    }
    result = ptra;
  }
  else
  {
    free(ptr);
    result = 0;
  }
  return result;
}

//----- (08052255) --------------------------------------------------------
void *__cdecl sub_8052255(void *src, size_t n)
{
  void *v2; // eax

  v2 = sub_805213A(n);
  return memcpy(v2, src, n);
}

//----- (080522A3) --------------------------------------------------------
void __noreturn sub_80522A3()
{
  char *v0; // eax

  v0 = gettext("memory exhausted");
  error(status, 0, "%s", v0);
  abort();
}

//----- (0805237F) --------------------------------------------------------
char *__cdecl sub_805237F(char *s, char *fromcode, char *tocode)
{
  char *v4; // [esp+1Ch] [ebp-Ch]

  v4 = sub_80555E0(s, fromcode, tocode);
  if ( !v4 && *__errno_location() == 12 )
    sub_80522A3();
  return v4;
}

//----- (080523BD) --------------------------------------------------------
#error "8052478: call analysis failed (funcsize=101)"

//----- (08052509) --------------------------------------------------------
int __cdecl sub_8052509(int a1, int a2, int a3)
{
  int v3; // eax
  int i; // [esp+1Ch] [ebp-Ch]

  for ( i = 0; ; i |= sub_80523BD(a1, a2) )
  {
    v3 = a3--;
    if ( !v3 )
      break;
  }
  return i;
}
// 80523BD: using guessed type int __cdecl sub_80523BD(_DWORD, _DWORD);

//----- (0805253F) --------------------------------------------------------
#error "8052911: call analysis failed (funcsize=304)"

//----- (08052988) --------------------------------------------------------
int __cdecl sub_8052988(FILE *stream)
{
  int v2; // eax
  __int64 v3; // rax
  int v4; // [esp+14h] [ebp-14h]
  int v5; // [esp+18h] [ebp-10h]

  v4 = 0;
  if ( fileno(stream) < 0 )
    return fclose(stream);
  if ( !__freading(stream) || (v2 = fileno(stream), LODWORD(v3) = lseek64(v2, 0, 0, 1), v3 != -1) )
  {
    if ( sub_8052A84(stream) )
      v4 = *__errno_location();
  }
  v5 = fclose(stream);
  if ( v4 )
  {
    *__errno_location() = v4;
    v5 = -1;
  }
  return v5;
}
// 8049430: using guessed type int __cdecl lseek64(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (08052A4B) --------------------------------------------------------
int __cdecl sub_8052A4B(FILE *stream)
{
  int result; // eax

  result = stream->_flags & 0x100;
  if ( result )
    result = sub_8052AC4(stream, 0, 0, 1);
  return result;
}

//----- (08052A84) --------------------------------------------------------
int __cdecl sub_8052A84(FILE *fp)
{
  if ( !fp || !__freading(fp) )
    return fflush(fp);
  sub_8052A4B(fp);
  return fflush(fp);
}

//----- (08052AC4) --------------------------------------------------------
int __cdecl sub_8052AC4(FILE *stream, int a2, int a3, int a4)
{
  int v4; // eax
  __int64 v5; // rax
  int v7; // edx
  int v8; // [esp+18h] [ebp-20h]
  int v9; // [esp+1Ch] [ebp-1Ch]
  __int64 v10; // [esp+28h] [ebp-10h]

  v8 = a2;
  v9 = a3;
  if ( stream->_IO_read_end != stream->_IO_read_ptr
    || stream->_IO_write_ptr != stream->_IO_write_base
    || stream->_IO_save_base )
  {
    return fseeko64(stream, v8, v9, a4);
  }
  v4 = fileno(stream);
  LODWORD(v5) = lseek64(v4, v8, v9, a4);
  v10 = v5;
  if ( v5 == -1 )
    return -1;
  stream->_flags &= 0xFFFFFFEF;
  v7 = HIDWORD(v10);
  LODWORD(stream->_offset) = v10;
  HIDWORD(stream->_offset) = v7;
  return 0;
}
// 80490F0: using guessed type int __cdecl fseeko64(_DWORD, _DWORD, _DWORD, _DWORD);
// 8049430: using guessed type int __cdecl lseek64(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (08052BCE) --------------------------------------------------------
#error "8052C36: call analysis failed (funcsize=45)"

//----- (08052C59) --------------------------------------------------------
#error "8052C7E: call analysis failed (funcsize=51)"

//----- (08052CEC) --------------------------------------------------------
int __cdecl sub_8052CEC(FILE *fp)
{
  bool v1; // ST26_1
  void *v2; // eax
  int v4; // [esp+0h] [ebp-28h]
  int v5; // [esp+4h] [ebp-24h]
  int v6; // [esp+8h] [ebp-20h]
  bool v7; // [esp+1Dh] [ebp-Bh]
  bool v8; // [esp+1Fh] [ebp-9h]

  v7 = __fpending(fp) != 0;
  v1 = ferror_unlocked(fp) != 0;
  v8 = sub_8052988(fp) != 0;
  if ( !v1 )
  {
    v2 = &loc_8052D50;
    if ( !v8 )
      v2 = &loc_8052D7F;
    dword_805C188 = (int)v2;
    sub_80562E1(v4, v5, v6);
    if ( !v7 && *__errno_location() == 9 )
      return 0;
  }
  if ( v8 != 1 )
    *__errno_location() = 0;
  return -1;
}
// 80562E1: using guessed type int __stdcall sub_80562E1(_DWORD, _DWORD, _DWORD);
// 805C188: using guessed type int dword_805C188;

//----- (08052D86) --------------------------------------------------------
int __cdecl sub_8052D86(int category)
{
  bool v1; // zf
  int v2; // edx
  int v3; // ecx
  void *v4; // eax
  unsigned __int8 v6; // [esp+1Bh] [ebp-Dh]
  const char *s1; // [esp+1Ch] [ebp-Ch]

  v6 = 1;
  s1 = setlocale(category, 0);
  if ( s1 )
  {
    v1 = strcmp(s1, "C") == 0;
    v4 = &loc_8052DDC;
    if ( v1 )
      v4 = &loc_8052DF3;
    dword_805C1B0 = (int)v4;
    sub_80561E2(v3, v2);
    if ( !strcmp(s1, "POSIX") )
      v6 = 0;
  }
  return v6;
}
// 80561E2: using guessed type int __fastcall sub_80561E2(_DWORD, _DWORD);
// 805C1B0: using guessed type int dword_805C1B0;

//----- (08052DFD) --------------------------------------------------------
#error "8052E2E: call analysis failed (funcsize=17)"

//----- (08052E33) --------------------------------------------------------
#error "8052E6A: call analysis failed (funcsize=272)"

//----- (08053321) --------------------------------------------------------
#error "8053327: positive sp value has been found (funcsize=0)"

//----- (0805332A) --------------------------------------------------------
const char *sub_805332A()
{
  char *v0; // ST1C_4
  const char *s1; // [esp+18h] [ebp-10h]
  char *s2; // [esp+1Ch] [ebp-Ch]

  s1 = nl_langinfo(14);
  if ( !s1 )
    s1 = (const char *)&unk_8057DBF;
  for ( s2 = (char *)sub_8052DFD(); *s2; s2 = &v0[strlen(v0) + 1] )
  {
    if ( !strcmp(s1, s2) || *s2 == 42 && !s2[1] )
    {
      s1 = &s2[strlen(s2) + 1];
      break;
    }
    v0 = &s2[strlen(s2) + 1];
  }
  if ( !*s1 )
    s1 = "ASCII";
  return s1;
}
// 8052DFD: using guessed type int sub_8052DFD(void);

//----- (080533DD) --------------------------------------------------------
int __cdecl sub_80533DD(int a1)
{
  int result; // eax

  result = *(unsigned __int8 *)(a1 + 16);
  if ( !(_BYTE)result )
  {
    if ( !*(_BYTE *)(a1 + 4) )
    {
      if ( sub_8055BD2(**(_BYTE **)(a1 + 20)) )
      {
        *(_DWORD *)(a1 + 24) = 1;
        *(_DWORD *)(a1 + 32) = **(char **)(a1 + 20);
        *(_BYTE *)(a1 + 28) = 1;
LABEL_19:
        result = a1;
        *(_BYTE *)(a1 + 16) = 1;
        return result;
      }
      if ( !mbsinit((const mbstate_t *)(a1 + 8)) )
        __assert_fail("mbsinit (&iter->state)", "lib/mbiter.h", 0x8Eu, "mbiter_multi_next");
      *(_BYTE *)(a1 + 4) = 1;
    }
    *(_DWORD *)(a1 + 24) = sub_8052BCE(
                             (wchar_t *)(a1 + 32),
                             *(char **)(a1 + 20),
                             *(_DWORD *)a1 - *(_DWORD *)(a1 + 20),
                             (mbstate_t *)(a1 + 8));
    if ( *(_DWORD *)(a1 + 24) == -1 )
    {
      *(_DWORD *)(a1 + 24) = 1;
      *(_BYTE *)(a1 + 28) = 0;
    }
    else if ( *(_DWORD *)(a1 + 24) == -2 )
    {
      *(_DWORD *)(a1 + 24) = *(_DWORD *)a1 - *(_DWORD *)(a1 + 20);
      *(_BYTE *)(a1 + 28) = 0;
    }
    else
    {
      if ( !*(_DWORD *)(a1 + 24) )
      {
        *(_DWORD *)(a1 + 24) = 1;
        if ( **(_BYTE **)(a1 + 20) )
          __assert_fail("*iter->cur.ptr == '\\0'", "lib/mbiter.h", 0xA9u, "mbiter_multi_next");
        if ( *(_DWORD *)(a1 + 32) )
          __assert_fail("iter->cur.wc == 0", "lib/mbiter.h", 0xAAu, "mbiter_multi_next");
      }
      *(_BYTE *)(a1 + 28) = 1;
      if ( mbsinit((const mbstate_t *)(a1 + 8)) )
        *(_BYTE *)(a1 + 4) = 0;
    }
    goto LABEL_19;
  }
  return result;
}

//----- (080536E5) --------------------------------------------------------
signed int __cdecl sub_80536E5(_BYTE *a1, int a2, unsigned int a3, _DWORD *a4)
{
  void *v4; // esp
  unsigned int v5; // eax
  void *v7; // eax
  int v8; // ST20_4
  int v9; // ST1C_4
  int v10; // [esp+0h] [ebp-38h]
  int v11; // [esp+4h] [ebp-34h]
  int v12; // [esp+8h] [ebp-30h]
  int v13; // [esp+Ch] [ebp-2Ch]
  int v14; // [esp+10h] [ebp-28h]
  int v15; // [esp+14h] [ebp-24h]
  unsigned int i; // [esp+14h] [ebp-24h]
  int v17; // [esp+18h] [ebp-20h]
  int v18; // [esp+18h] [ebp-20h]
  int v19; // [esp+1Ch] [ebp-1Ch]
  int v20; // [esp+1Ch] [ebp-1Ch]
  int v21; // [esp+20h] [ebp-18h]
  _BYTE *v22; // [esp+20h] [ebp-18h]
  int v23; // [esp+24h] [ebp-14h]
  _BYTE *v24; // [esp+24h] [ebp-14h]
  unsigned int v25; // [esp+28h] [ebp-10h]
  int v26; // [esp+2Ch] [ebp-Ch]
  unsigned int v27; // [esp+2Ch] [ebp-Ch]
  int v28; // [esp+30h] [ebp-8h]
  int v29; // [esp+34h] [ebp-4h]
  int savedregs; // [esp+38h] [ebp+0h]

  v25 = a3;
  if ( a3 > 0x1FFFFFFF )
  {
    v5 = 0;
  }
  else
  {
    if ( 4 * a3 <= 0xFB7 )
    {
      v4 = alloca(16 * ((4 * (a3 + 2) + 30) / 0x10));
      dword_805C160 = (int)&loc_805378F;
      sub_80563C9(v10, v11, v12, v13, v14, v15, v17, v19, v21, v23, a3, v26, v28, v29, savedregs);
    }
    v5 = sub_8055952(4 * v25);
  }
  v27 = v5;
  if ( !v5 )
    return 0;
  *(_DWORD *)(v5 + 4) = 1;
  v18 = 0;
  for ( i = 2; i < v25; i = v9 + 1 )
  {
    HIBYTE(v14) = *(_BYTE *)(i - 1 + a2);
    v7 = &loc_80537FB;
    if ( *(_BYTE *)(a2 + v18) != HIBYTE(v14) )
      v7 = &loc_805382C;
    dword_805C160 = (int)v7;
    sub_80563C9(v10, v11, v12, v13, v14, i, v18, v19, v21, v23, v25, v27, v28, v29, savedregs);
    v18 = v8 + 1;
    *(_DWORD *)(4 * v9 + v27) = v9 - v18;
  }
  *a4 = 0;
  v20 = 0;
  v22 = a1;
  v24 = a1;
  while ( *v24 )
  {
    if ( *(_BYTE *)(a2 + v20) == *v24 )
    {
      ++v20;
      ++v24;
      if ( v20 == v25 )
      {
        *a4 = v22;
        break;
      }
    }
    else if ( v20 )
    {
      v22 += *(_DWORD *)(4 * v20 + v27);
      v20 -= *(_DWORD *)(4 * v20 + v27);
    }
    else
    {
      ++v22;
      ++v24;
    }
  }
  sub_8055A07(v27);
  return 1;
}
// 8055A07: using guessed type _DWORD __cdecl sub_8055A07(_DWORD);
// 80563C9: using guessed type int __stdcall sub_80563C9(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 805C160: using guessed type int dword_805C160;

//----- (08053951) --------------------------------------------------------
#error "805397C: call analysis failed (funcsize=17)"

//----- (08053981) --------------------------------------------------------
#error "80539B0: call analysis failed (funcsize=15)"

//----- (080539B5) --------------------------------------------------------
#error "80539D6: call analysis failed (funcsize=525)"

//----- (080541F7) --------------------------------------------------------
int __cdecl __noreturn sub_80541F7(_BYTE *a1, _BYTE *a2)
{
  _BYTE *v16; // eax
  _BYTE *v17; // eax
  unsigned int v18; // eax
  unsigned int v19; // et1
  int (*v20)(); // eax
  int v22; // [esp-8h] [ebp-180h]
  _BYTE *v23; // [esp-4h] [ebp-17Ch]
  _BYTE *v24; // [esp+0h] [ebp-178h]
  unsigned int v25; // [esp+4h] [ebp-174h]
  int v26; // [esp+8h] [ebp-170h]
  int v27; // [esp+Ch] [ebp-16Ch]
  int v28; // [esp+10h] [ebp-168h]
  int v29; // [esp+14h] [ebp-164h]
  _BYTE *v30; // [esp+18h] [ebp-160h]
  _BYTE *v31; // [esp+1Ch] [ebp-15Ch]
  int v32; // [esp+20h] [ebp-158h]
  int v33; // [esp+24h] [ebp-154h]
  _BYTE *v34; // [esp+28h] [ebp-150h]
  int v35; // [esp+2Ch] [ebp-14Ch]
  int v36; // [esp+30h] [ebp-148h]
  int v37; // [esp+34h] [ebp-144h]
  int v38; // [esp+38h] [ebp-140h]
  unsigned int v39; // [esp+3Ch] [ebp-13Ch]
  unsigned int v40; // [esp+40h] [ebp-138h]
  unsigned int v41; // [esp+44h] [ebp-134h]
  _BYTE *v42; // [esp+48h] [ebp-130h]
  _BYTE *v43; // [esp+4Ch] [ebp-12Ch]
  _BYTE *i; // [esp+50h] [ebp-128h]
  char v45; // [esp+54h] [ebp-124h]
  int v46; // [esp+58h] [ebp-120h]
  int v47; // [esp+5Ch] [ebp-11Ch]
  char v48; // [esp+60h] [ebp-118h]
  void *s2; // [esp+64h] [ebp-114h]
  int v50; // [esp+68h] [ebp-110h]
  char v51; // [esp+6Ch] [ebp-10Ch]
  int v52; // [esp+70h] [ebp-108h]
  int v53; // [esp+74h] [ebp-104h]
  int v54; // [esp+78h] [ebp-100h]
  int v55; // [esp+7Ch] [ebp-FCh]
  int v56; // [esp+80h] [ebp-F8h]
  int v57; // [esp+84h] [ebp-F4h]
  int v58; // [esp+88h] [ebp-F0h]
  unsigned int v96; // [esp+16Ch] [ebp-Ch]

  v31 = a1;
  v30 = a2;
  v96 = __readgsdword(0x14u);
  if ( __ctype_get_mb_cur_max() <= 1 )
  {
    if ( *v30 )
    {
      LOBYTE(v33) = 1;
      v39 = 0;
      v40 = 0;
      v41 = 0;
      v42 = v30;
      v17 = v30++;
      BYTE2(v33) = *v17;
      while ( 1 )
      {
        if ( !*v31 )
        {
          v16 = 0;
          goto LABEL_88;
        }
        if ( (_BYTE)v33 && v39 > 9 && 5 * v39 <= v40 )
        {
          if ( v42 )
          {
            v25 = v40 - v41;
            v24 = v42;
            v42 += strnlen();
            if ( !*v42 )
              v42 = 0;
            v41 = v40;
          }
          if ( !v42 )
          {
            v18 = strlen(v30 - 1);
            HIBYTE(v33) = sub_80536E5(v31, (int)(v30 - 1), v18, &v34);
            if ( HIBYTE(v33) )
            {
              v16 = v34;
              goto LABEL_88;
            }
            LOBYTE(v33) = 0;
          }
        }
        ++v39;
        ++v40;
        if ( *v31 == BYTE2(v33) )
        {
          v43 = v31 + 1;
          for ( i = v30; ; ++i )
          {
            if ( !*i )
            {
              dword_805C174 = (int)&loc_8054A94;
              sub_8056359(
                v24,
                v25,
                v26,
                v27,
                v28,
                v29,
                v30,
                v31,
                v32,
                v33,
                v34,
                v35,
                v36,
                v37,
                v38,
                v39,
                v40,
                v41,
                v42,
                v43,
                i,
                *(_DWORD *)&v45,
                v46);
            }
            if ( !*v43 )
            {
              dword_805C188 = (int)&loc_8054A94;
              sub_80562E1(v24, v25, v26);
            }
            ++v40;
            if ( *v43 != *i )
              break;
            ++v43;
          }
        }
        ++v31;
      }
    }
    v16 = v31;
  }
  else
  {
    s2 = v30;
    v45 = 0;
    memset(&v46, 0, 8u);
    v48 = 0;
    sub_8054AC7(&v45);
    if ( v51 != 1 || v52 )
    {
      dword_805C188 = (int)&loc_80542BE;
      sub_80562E1(v24, v25, v26);
    }
    v16 = v31;
  }
LABEL_88:
  v19 = __readgsdword(0x14u);
  v23 = v16;
  v22 = v19 ^ v96;
  v20 = (int (*)())&loc_8054AB9;
  if ( v19 == v96 )
    v20 = sub_8054ABE;
  dword_805C19C = (int)v20;
  return sub_805625A(
           v24,
           v25,
           v26,
           v27,
           v28,
           v29,
           v30,
           v31,
           v32,
           v33,
           v34,
           v35,
           v36,
           v37,
           v38,
           v39,
           v40,
           v41,
           v42,
           v43,
           i,
           *(_DWORD *)&v45,
           v46,
           v47,
           *(_DWORD *)&v48,
           s2,
           v50,
           *(_DWORD *)&v51,
           v52,
           v53,
           v54,
           v55,
           v56,
           v57,
           v58);
}
// 80493D0: using guessed type int strnlen(void);
// 8053951: using guessed type _DWORD __cdecl sub_8053951(_DWORD);
// 8054ABE: using guessed type int sub_8054ABE();
// 8054AC7: using guessed type _DWORD __cdecl sub_8054AC7(_DWORD);
// 8056159: using guessed type int __fastcall sub_8056159(_DWORD, _DWORD);
// 805625A: using guessed type int __stdcall sub_805625A(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 80562E1: using guessed type int __stdcall sub_80562E1(_DWORD, _DWORD, _DWORD);
// 8056359: using guessed type int __stdcall sub_8056359(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 805C174: using guessed type int dword_805C174;
// 805C188: using guessed type int dword_805C188;
// 805C19C: using guessed type int dword_805C19C;
// 805C1C4: using guessed type int dword_805C1C4;

//----- (08054ABE) --------------------------------------------------------
#error "8054AC4: positive sp value has been found (funcsize=0)"

//----- (08054AC7) --------------------------------------------------------
#error "8054AF6: call analysis failed (funcsize=144)"

//----- (08054DA3) --------------------------------------------------------
#error "8054F52: call analysis failed (funcsize=97)"

//----- (0805523B) --------------------------------------------------------
void *__cdecl sub_805523B(char *s, iconv_t cd)
{
  void *result; // eax
  int v3; // edx
  int v4; // ecx
  int v5; // eax
  bool v6; // zf
  void *v7; // eax
  char *v8; // eax
  int v9; // [esp-4h] [ebp-7Ch]
  int v10; // [esp+0h] [ebp-78h]
  int v11; // [esp+4h] [ebp-74h]
  int v12; // [esp+8h] [ebp-70h]
  int v13; // [esp+Ch] [ebp-6Ch]
  int v14; // [esp+10h] [ebp-68h]
  int v15; // [esp+14h] [ebp-64h]
  int v16; // [esp+18h] [ebp-60h]
  int v17; // [esp+1Ch] [ebp-5Ch]
  int v18; // [esp+20h] [ebp-58h]
  int v19; // [esp+24h] [ebp-54h]
  char *inbuf; // [esp+28h] [ebp-50h]
  size_t inbytesleft; // [esp+2Ch] [ebp-4Ch]
  char *outbuf; // [esp+30h] [ebp-48h]
  size_t outbytesleft; // [esp+34h] [ebp-44h]
  void *ptr; // [esp+38h] [ebp-40h]
  size_t size; // [esp+3Ch] [ebp-3Ch]
  int v26; // [esp+40h] [ebp-38h]
  size_t v27; // [esp+44h] [ebp-34h]
  int v28; // [esp+48h] [ebp-30h]
  size_t v29; // [esp+4Ch] [ebp-2Ch]
  char *v30; // [esp+50h] [ebp-28h]
  size_t v31; // [esp+54h] [ebp-24h]
  int v32; // [esp+58h] [ebp-20h]
  size_t v33; // [esp+5Ch] [ebp-1Ch]
  char *v34; // [esp+60h] [ebp-18h]
  size_t v35; // [esp+64h] [ebp-14h]
  void *v36; // [esp+68h] [ebp-10h]
  int v37; // [esp+6Ch] [ebp-Ch]

  inbuf = s;
  inbytesleft = strlen(s);
  size = inbytesleft;
  v26 = 0xFFFF;
  if ( inbytesleft <= 0xFFF )
    size *= 16;
  ptr = malloc(++size);
  if ( ptr )
  {
    iconv(cd, 0, 0, 0, 0);
    outbuf = (char *)ptr;
    for ( outbytesleft = size - 1; ; outbytesleft = v29 - v28 - 1 )
    {
      v27 = iconv(cd, (char **)&v10 - 20, (size_t *)&v10 - 19, (char **)&v10 - 18, &outbytesleft);
      if ( v27 != -1 )
        break;
      if ( *__errno_location() == 22 )
      {
        dword_805C1C4 = (int)&loc_805542F;
        sub_8056159(v4, v3);
      }
      v5 = *__errno_location();
      v6 = v5 == 7;
      v9 = v5;
      v7 = &loc_8055374;
      if ( !v6 )
        v7 = &loc_805542A;
      dword_805C160 = (int)v7;
      sub_80563C9(v10, v11, v12, v13, v14, v15, v16, v17, v18, v19, inbuf, inbytesleft, outbuf, outbytesleft, ptr);
      v28 = outbuf - (_BYTE *)ptr;
      v29 = 2 * size;
      if ( 2 * size <= size )
      {
        *__errno_location() = 12;
LABEL_26:
        v37 = *__errno_location();
        free(ptr);
        *__errno_location() = v37;
        return 0;
      }
      v30 = (char *)realloc(ptr, v29);
      if ( !v30 )
      {
        *__errno_location() = 12;
        goto LABEL_26;
      }
      ptr = v30;
      size = v29;
      outbuf = &v30[v28];
    }
    while ( 1 )
    {
      v31 = iconv(cd, 0, 0, &outbuf, &outbytesleft);
      if ( v31 != -1 )
        break;
      if ( *__errno_location() != 7 )
        goto LABEL_26;
      v32 = outbuf - (_BYTE *)ptr;
      v33 = 2 * size;
      if ( 2 * size <= size )
      {
        *__errno_location() = 12;
        goto LABEL_26;
      }
      v34 = (char *)realloc(ptr, v33);
      if ( !v34 )
      {
        *__errno_location() = 12;
        dword_805C174 = (int)&loc_8055594;
        sub_8056359(
          v10,
          v11,
          v12,
          v13,
          v14,
          v15,
          v16,
          v17,
          v18,
          v19,
          inbuf,
          inbytesleft,
          outbuf,
          outbytesleft,
          ptr,
          size,
          v26,
          v27,
          v28,
          v29,
          v30,
          v31,
          v32);
      }
      ptr = v34;
      size = v33;
      outbuf = &v34[v32];
      outbytesleft = v33 - v32 - 1;
    }
    v8 = outbuf++;
    *v8 = 0;
    v35 = outbuf - (_BYTE *)ptr;
    if ( outbuf - (_BYTE *)ptr < size )
    {
      v36 = realloc(ptr, v35);
      if ( v36 )
        ptr = v36;
    }
    result = ptr;
  }
  else
  {
    *__errno_location() = 12;
    result = 0;
  }
  return result;
}
// 8056159: using guessed type int __fastcall sub_8056159(_DWORD, _DWORD);
// 8056359: using guessed type int __stdcall sub_8056359(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 80563C9: using guessed type int __stdcall sub_80563C9(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 805C160: using guessed type int dword_805C160;
// 805C174: using guessed type int dword_805C174;
// 805C1C4: using guessed type int dword_805C1C4;

//----- (080555E0) --------------------------------------------------------
char *__cdecl sub_80555E0(char *s, char *fromcode, char *tocode)
{
  char *result; // eax
  int v4; // ST24_4
  int v5; // ST28_4
  iconv_t cd; // [esp+1Ch] [ebp-1Ch]
  void *ptr; // [esp+20h] [ebp-18h]
  char *v8; // [esp+2Ch] [ebp-Ch]

  if ( *s && sub_8052C59((unsigned __int8 *)fromcode, (unsigned __int8 *)tocode) )
  {
    cd = iconv_open(tocode, fromcode);
    if ( cd == (iconv_t)-1 )
      return 0;
    ptr = sub_805523B(s, cd);
    if ( ptr )
    {
      if ( iconv_close(cd) < 0 )
      {
        v5 = *__errno_location();
        free(ptr);
        *__errno_location() = v5;
        return 0;
      }
    }
    else
    {
      v4 = *__errno_location();
      iconv_close(cd);
      *__errno_location() = v4;
    }
    result = (char *)ptr;
  }
  else
  {
    v8 = strdup(s);
    if ( !v8 )
      *__errno_location() = 12;
    result = v8;
  }
  return result;
}

//----- (080556C5) --------------------------------------------------------
size_t __cdecl sub_80556C5(void *s, size_t n)
{
  size_t result; // eax
  _BYTE *v3; // [esp+1Ch] [ebp-Ch]

  v3 = memchr(s, 0, n);
  if ( v3 )
    result = v3 - (_BYTE *)s + 1;
  else
    result = n;
  return result;
}

//----- (0805591C) --------------------------------------------------------
int __cdecl sub_805591C(int a1)
{
  int result; // eax

  if ( (unsigned int)(a1 - 65) > 0x19 )
    result = a1;
  else
    result = a1 + 32;
  return result;
}

//----- (08055952) --------------------------------------------------------
unsigned int __cdecl sub_8055952(unsigned int a1)
{
  _DWORD *v1; // ST18_4
  unsigned int v2; // ST14_4
  _DWORD *v4; // [esp+14h] [ebp-14h]

  if ( a1 + 8 < a1 )
    return 0;
  v4 = malloc(a1 + 8);
  if ( !v4 )
    return 0;
  v1 = v4;
  v2 = (unsigned int)(v4 + 2);
  v1[1] = 336984906;
  *v1 = dword_805CD75[v2 % 0x101];
  dword_805CD75[v2 % 0x101] = v2;
  return v2;
}

//----- (08055A07) --------------------------------------------------------
#error "8055A27: call analysis failed (funcsize=74)"

//----- (08055B2D) --------------------------------------------------------
#error "8055BB0: call analysis failed (funcsize=46)"

//----- (08055BB5) --------------------------------------------------------
#error "8055BD1: positive sp value has been found (funcsize=0)"

//----- (08055BD2) --------------------------------------------------------
bool __cdecl sub_8055BD2(unsigned __int8 a1)
{
  return (((unsigned int)dword_8057F80[a1 >> 5] >> (a1 & 0x1F)) & 1) != 0;
}

//----- (08055C29) --------------------------------------------------------
size_t __cdecl sub_8055C29(const char *a1)
{
  int v1; // edx
  int v2; // ecx
  void *v3; // eax
  int v5; // [esp+10h] [ebp-48h]
  char v6; // [esp+14h] [ebp-44h]
  int v7; // [esp+18h] [ebp-40h]
  char i; // [esp+20h] [ebp-38h]
  const char *v9; // [esp+24h] [ebp-34h]
  int v10; // [esp+28h] [ebp-30h]
  char v11; // [esp+2Ch] [ebp-2Ch]
  int v12; // [esp+30h] [ebp-28h]
  unsigned int v13; // [esp+4Ch] [ebp-Ch]

  v13 = __readgsdword(0x14u);
  if ( __ctype_get_mb_cur_max() > 1 )
  {
    v5 = 0;
    v9 = a1;
    v6 = 0;
    memset(&v7, 0, 8u);
    for ( i = 0; ; i = 0 )
    {
      sub_8054AC7(&v6);
      if ( v11 == 1 )
      {
        v3 = &loc_8055CCC;
        if ( !v12 )
          v3 = &loc_8055CD3;
        dword_805C1B0 = (int)v3;
        sub_80561E2(v2, v1);
      }
      ++v5;
      v9 += v10;
    }
  }
  return strlen(a1);
}
// 8054AC7: using guessed type _DWORD __cdecl sub_8054AC7(_DWORD);
// 80561E2: using guessed type int __fastcall sub_80561E2(_DWORD, _DWORD);
// 805C1B0: using guessed type int dword_805C1B0;

//----- (08055D09) --------------------------------------------------------
#error "8055DD7: call analysis failed (funcsize=128)"

//----- (08055E7E) --------------------------------------------------------
#error "8055EF4: call analysis failed (funcsize=47)"

//----- (08055FB6) --------------------------------------------------------
int __cdecl sub_8055FB6(int a1)
{
  return __cxa_atexit(a1, 0, dword_805C1F4);
}
// 80491F0: using guessed type int __cdecl __cxa_atexit(_DWORD, _DWORD, _DWORD);
// 805C1F4: using guessed type int dword_805C1F4;

//----- (08055FE5) --------------------------------------------------------
int __cdecl sub_8055FE5(int a1, int a2)
{
  return __fxstat64(3, a1, a2);
}
// 8049190: using guessed type int __cdecl __fxstat64(_DWORD, _DWORD, _DWORD);

//----- (08056159) --------------------------------------------------------
#error "805615F: positive sp value has been found (funcsize=0)"

//----- (080561A1) --------------------------------------------------------
#error "80561DA: positive sp value has been found (funcsize=18)"

//----- (080561E2) --------------------------------------------------------
#error "80561E8: positive sp value has been found (funcsize=0)"

//----- (0805625A) --------------------------------------------------------
#error "8056260: positive sp value has been found (funcsize=0)"

//----- (080562E1) --------------------------------------------------------
#error "80562E7: positive sp value has been found (funcsize=0)"

//----- (08056359) --------------------------------------------------------
#error "805635F: positive sp value has been found (funcsize=0)"

//----- (080563C9) --------------------------------------------------------
#error "80563CF: positive sp value has been found (funcsize=0)"

//----- (080563E0) --------------------------------------------------------
int (**sub_80563E0())()
{
  int (**result)(); // eax
  int v1; // esi
  int v2; // edi

  init_proc();
  result = off_805BEE4;
  v1 = &off_805BEE8 - off_805BEE4;
  if ( v1 )
  {
    v2 = 0;
    do
      result = (int (**)())off_805BEE4[v2++]();
    while ( v1 != v2 );
  }
  return result;
}
// 805BEE4: using guessed type int (*off_805BEE4[2])();
// 805BEE8: using guessed type int (*off_805BEE8)();

//----- (08056444) --------------------------------------------------------
void term_proc()
{
  ;
}

#error "There were 53 decompilation failure(s) on 164 function(s)"
